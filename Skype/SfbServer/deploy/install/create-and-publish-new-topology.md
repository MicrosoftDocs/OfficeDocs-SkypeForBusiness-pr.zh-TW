---
title: 在商務用 Skype Server 中建立和發佈新的拓撲
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 2/15/2018
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Admin
ms.custom: ''
ms.assetid: 451c41a1-b8c5-4dc3-9e48-0da9ed5381a1
description: '摘要: 瞭解如何在安裝商務用 Skype Server 前建立、發佈及驗證新的拓撲。 從 Microsoft 評估中心下載免費試用版商務用 Skype Server, 網址為: https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server。'
ms.openlocfilehash: c62e2ae061f02f195d0a9560d08234c452543d88
ms.sourcegitcommit: e1c8a62577229daf42f1a7bcfba268a9001bb791
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/07/2019
ms.locfileid: "36245006"
---
# <a name="create-and-publish-new-topology-in-skype-for-business-server"></a><span data-ttu-id="f2720-104">在商務用 Skype Server 中建立和發佈新的拓撲</span><span class="sxs-lookup"><span data-stu-id="f2720-104">Create and publish new topology in Skype for Business Server</span></span>
 
<span data-ttu-id="f2720-105">**摘要:** 瞭解如何在安裝商務用 Skype Server 前建立、發佈及驗證新的拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-105">**Summary:** Learn how to create, publish, and verify a new topology before you install Skype for Business Server.</span></span> <span data-ttu-id="f2720-106">從 Microsoft 評估中心下載免費試用版商務用 Skype Server, 網址為: [https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server](https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server)。</span><span class="sxs-lookup"><span data-stu-id="f2720-106">Download a free trial of Skype for Business Server from the Microsoft Evaluation center at: [https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server](https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server).</span></span>
  
<span data-ttu-id="f2720-107">您必須先建立拓撲併發布, 才能在拓撲中的每個伺服器上安裝商務用 Skype Server 系統。</span><span class="sxs-lookup"><span data-stu-id="f2720-107">Before you can install the Skype for Business Server system on each of the servers in the topology, you must create a topology and publish it.</span></span> <span data-ttu-id="f2720-108">當您發佈拓撲時, 會將拓撲資訊載入到中央管理儲存資料庫中。</span><span class="sxs-lookup"><span data-stu-id="f2720-108">When you publish a topology, you are loading the topology information into the Central Management Store database.</span></span> <span data-ttu-id="f2720-109">如果這是企業版文件庫, 當您第一次發佈新的拓撲時, 就會建立中央管理儲存資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-109">If this is an Enterprise Edition pool, you are creating the Central Management Store database the first time you publish a new topology.</span></span> <span data-ttu-id="f2720-110">如果這是標準版, 您必須先從 [部署嚮導] 執行 [準備第一個標準版伺服器] 程式, 然後才能發佈拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-110">If this is Standard Edition, you will need to run the Prepare First Standard Edition Server process from the Deployment Wizard before you publish a topology.</span></span> <span data-ttu-id="f2720-111">這是為了準備標準版本, 只要安裝 SQL Server Express Edition 實例並建立中央管理儲存。</span><span class="sxs-lookup"><span data-stu-id="f2720-111">This prepares for Standard Edition by installing a SQL Server Express Edition instance and creating the Central Management Store.</span></span> <span data-ttu-id="f2720-112">您可以依照任何循序執行步驟1到5。</span><span class="sxs-lookup"><span data-stu-id="f2720-112">You can do steps 1 through 5 in any order.</span></span> <span data-ttu-id="f2720-113">不過, 您必須在順序中執行步驟6、7和 8, 並在步驟1到5之後, 如圖表中所述。</span><span class="sxs-lookup"><span data-stu-id="f2720-113">However, you must do steps 6, 7, and 8 in order, and after steps 1 through 5, as outlined in the diagram.</span></span> <span data-ttu-id="f2720-114">若要瞭解如何建立及發佈新的拓撲, 請參閱8的步驟6。</span><span class="sxs-lookup"><span data-stu-id="f2720-114">How to create and publish a new topology is described in step 6 of 8.</span></span>
  
![概覽圖表](../../media/c5c09ba2-c98b-4194-9857-7c3087c5560e.png)
  
## <a name="create-and-publish-new-topology"></a><span data-ttu-id="f2720-116">Create and publish new topology</span><span class="sxs-lookup"><span data-stu-id="f2720-116">Create and publish new topology</span></span>

<span data-ttu-id="f2720-117">您可以使用商務用 Skype Server 拓撲產生器來設計、定義、設定及發佈拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-117">You can use Skype for Business Server Topology Builder to design, define, configure, and publish topologies.</span></span> <span data-ttu-id="f2720-118">此工具是在本文先前安裝管理工具時安裝的。</span><span class="sxs-lookup"><span data-stu-id="f2720-118">This tool was installed when you installed Administrative Tools earlier in the article.</span></span> <span data-ttu-id="f2720-119">建立拓撲時, 有許多不同的選項可供您選擇。</span><span class="sxs-lookup"><span data-stu-id="f2720-119">There are many different choices you can make when you create a topology.</span></span> <span data-ttu-id="f2720-120">在此程式中, 您將使用會議建立基本拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-120">In this procedure, you will create a basic topology with conferencing.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="f2720-121">商務用 Skype 伺服器需要 SQL Server 才能運作。</span><span class="sxs-lookup"><span data-stu-id="f2720-121">Skype for Business Server requires SQL Server in order to operate.</span></span> <span data-ttu-id="f2720-122">主要資料庫稱為「中央管理」存放區。</span><span class="sxs-lookup"><span data-stu-id="f2720-122">The primary databases are known as the Central Management Store.</span></span> <span data-ttu-id="f2720-123">如果您要部署企業版, 則會在您使用下列步驟發佈拓撲時建立這些資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-123">If you are deploying Enterprise Edition, these databases are created when you publish the topology by using the steps below.</span></span> <span data-ttu-id="f2720-124">在這種情況下, 拓撲建立器會要求您輸入連線資訊至 SQL Server 的安裝。</span><span class="sxs-lookup"><span data-stu-id="f2720-124">In this case, Topology Builder will ask you for the connection information to a SQL Server installation.</span></span> <span data-ttu-id="f2720-125">如果您打算部署標準版版本, 您必須先安裝 SQL Server Express Edition, 才能定義併發布新的拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-125">If you are planning to deploy Standard Edition, you will need to install SQL Server Express Edition before you define and publish the new topology.</span></span> <span data-ttu-id="f2720-126">若要安裝 SQL Server Express Edition, 您應該在將充當前端的伺服器上開啟 [部署嚮導], 然後執行 [準備第一個標準版伺服器]。</span><span class="sxs-lookup"><span data-stu-id="f2720-126">To install SQL Server Express Edition, you should open the Deployment Wizard on the server that will act as the Front End, and then run Prepare First Standard Edition Server.</span></span> <span data-ttu-id="f2720-127">當您按一下 [準備第一個標準版 Server] 時, [部署嚮導] 會自動安裝 SQL Server Express Edition 並建立中央管理儲存資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-127">When you click Prepare First Standard Edition Server, the Deployment Wizard automatically installs SQL Server Express Edition and creates the Central Management Store databases.</span></span> 
  
### <a name="create-a-new-topology"></a><span data-ttu-id="f2720-128">建立新的拓撲</span><span class="sxs-lookup"><span data-stu-id="f2720-128">Create a new topology</span></span>

1. <span data-ttu-id="f2720-129">以擁有拓撲建立器存取權的標準使用者身分登入。</span><span class="sxs-lookup"><span data-stu-id="f2720-129">Log in as a standard user with access to Topology Builder.</span></span>
    
2. <span data-ttu-id="f2720-130">開啟商務用 Skype Server 拓撲建立器。</span><span class="sxs-lookup"><span data-stu-id="f2720-130">Open Skype for Business Server Topology Builder.</span></span>
    
3. <span data-ttu-id="f2720-131">選取 [**新拓撲**], 然後按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-131">Select **New Topology**, and click **OK**..</span></span>
    
4. <span data-ttu-id="f2720-132">選取拓朴設定檔的位置和檔案名。</span><span class="sxs-lookup"><span data-stu-id="f2720-132">Select a location and file name for the topology configuration file.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="f2720-133">拓撲配置會儲存為拓撲建立器 XML (tbxml) 檔案。</span><span class="sxs-lookup"><span data-stu-id="f2720-133">The topology configuration is saved as a Topology Builder XML (.tbxml) file.</span></span> <span data-ttu-id="f2720-134">當您發佈拓撲時, 您會將設定資訊從檔案推送至 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-134">When you publish a topology, you are pushing the configuration information from the file to the SQL Server database.</span></span> <span data-ttu-id="f2720-135">當您在未來開啟拓撲建立器時, 您可以將現有的配置從 SQL Server 直接下載到拓撲建立器中, 然後將它發佈回 SQL Server, 或將它儲存為拓撲建立器設定檔。</span><span class="sxs-lookup"><span data-stu-id="f2720-135">When you open Topology Builder in the future, you can download the existing configuration from SQL Server directly into Topology Builder and either publish it back to SQL Server or save it as a Topology Builder configuration file.</span></span> 
  
5. <span data-ttu-id="f2720-136">在 [**定義主要網域] 畫面**上, 輸入**主要 SIP 網域**, 然後按 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-136">On the **Define the primary domain screen**, enter the **primary SIP domain**, and click **Next**.</span></span> <span data-ttu-id="f2720-137">在這個範例中, 我們使用的是**contoso**, 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-137">In this example, we are using **contoso.local**, as shown in the figure.</span></span>
    
     ![定義主要 sip 網域。](../../media/353e6b38-485f-4042-8585-aefa6c74b554.png)
  
6. <span data-ttu-id="f2720-139">新增任何其他支援的 SIP 網域, 然後按 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-139">Add any additional supported SIP domains, and then click **Next**.</span></span>
    
7. <span data-ttu-id="f2720-140">輸入第一個網站的**名稱**和**描述**(位置), 然後按一下 **[下一步]**, 如圖所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-140">Enter a **Name** and **Description** for the first site (location), and then click **Next**, as shown in the figure.</span></span>
    
     ![定義第一個網站 (位置)。](../../media/d8b6c54a-2011-4efb-97fb-a4de0f11303c.png)
  
8. <span data-ttu-id="f2720-142">輸入該網站的**市/縣**、**州/省**及**國家/地區代碼**, 然後按一下 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-142">Enter the **City**, **State/Province**, and **Country/Region Code** for the site, and then click **Next**.</span></span>
    
9. <span data-ttu-id="f2720-143">按一下 **[完成]** 以完成定義新拓撲的程式。</span><span class="sxs-lookup"><span data-stu-id="f2720-143">Click **Finish** to complete the process of defining a new topology.</span></span> <span data-ttu-id="f2720-144">新的 [前端] 嚮導會自動啟動。</span><span class="sxs-lookup"><span data-stu-id="f2720-144">The New Front End Wizard launches automatically.</span></span>
    
### <a name="define-a-front-end-pool-or-standard-edition-server"></a><span data-ttu-id="f2720-145">定義前端池或標準版伺服器</span><span class="sxs-lookup"><span data-stu-id="f2720-145">Define a Front End pool or Standard Edition server</span></span>

1. <span data-ttu-id="f2720-146">查看嚮導先決條件, 然後按 **[下一步**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-146">Review the wizard prerequisites, and then click **Next**.</span></span>
    
2. <span data-ttu-id="f2720-147">輸入該池子的完整功能變數名稱 (FQDN), 然後選取 [**企業版前端池**] 或 [**標準版伺服器**], 然後按一下 **[下一步]**, 如圖所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-147">Enter the fully qualified domain name (FQDN) of the pool, and select either **Enterprise Edition Front End Pool** or **Standard Edition Server**, and then click **Next**, as shown in the figure.</span></span>
    
    > [!TIP]
    > <span data-ttu-id="f2720-148">商務用 Skype Server Enterprise Edition 可以包含多個伺服器共同作業, 以提供前端角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-148">Skype for Business Server Enterprise Edition can include multiple servers working together to provide the Front End role.</span></span> <span data-ttu-id="f2720-149">當使用多個伺服器來履行角色時, 稱為「池」。</span><span class="sxs-lookup"><span data-stu-id="f2720-149">When multiple servers are used to fulfill the role, it is called a pool.</span></span> <span data-ttu-id="f2720-150">因此, 多個伺服器共同合作來提供前端角色也稱為 [前端] 池。</span><span class="sxs-lookup"><span data-stu-id="f2720-150">Thus, multiple servers working together to provide the Front End role is also referred to as the Front End pool.</span></span> <span data-ttu-id="f2720-151">商務用 Skype Server 標準版只能包含一個伺服器來提供前端角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-151">Skype for Business Server Standard Edition can include only a single server to provide the Front End role.</span></span> <span data-ttu-id="f2720-152">即使只有單一伺服器提供該角色, 一般也會參照前端池。</span><span class="sxs-lookup"><span data-stu-id="f2720-152">It is common to refer to the Front End pool even if only a single server is providing the role.</span></span> 
  
     ![定義 [前端] 池。](../../media/c1447557-261e-4260-a362-ab8d19070eb9.png)
  
3. <span data-ttu-id="f2720-154">輸入池中所有電腦的完整功能變數名稱 (Fqdn), 然後按一下 [**下一步]** , 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-154">Enter the fully qualified domain names (FQDNs) of all computers in the pool, and then click **Next** as shown in the figure.</span></span>
    
     ![定義池中的電腦。](../../media/1106b4f3-8745-485b-b495-f885a5dfefda.png)
  
4. <span data-ttu-id="f2720-156">選取將包含在此拓撲中的功能, 然後按一下 **[下一步]** , 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-156">Select the features that will be included in this topology, and then click **Next** as shown in the figure.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="f2720-157">商務用 Skype 伺服器包含許多高級功能。</span><span class="sxs-lookup"><span data-stu-id="f2720-157">Skype for Business Server includes many advanced features.</span></span> <span data-ttu-id="f2720-158">針對您想要使用的每個特定功能, 查看規劃與部署檔。</span><span class="sxs-lookup"><span data-stu-id="f2720-158">Review planning and deployment documentation for each specific feature you want to use.</span></span> 
  
     ![選取要部署的功能。](../../media/77257588-d0e1-4517-a12a-869ffe009353.png)
  
5. <span data-ttu-id="f2720-160">在 [**選取 collocated 伺服器角色**] 頁面上, 您可以選擇 collocate 前端伺服器上的中繼伺服器, 或選擇將其部署為獨立伺服器。</span><span class="sxs-lookup"><span data-stu-id="f2720-160">On the **Select collocated server roles** page, you can choose to collocate the Mediation server on the Front End server, or you can choose to deploy it as a standalone server.</span></span>
    
    <span data-ttu-id="f2720-161">如果您想要在企業版前端池中 collocate 轉送伺服器, 請確認已選取此核取方塊。</span><span class="sxs-lookup"><span data-stu-id="f2720-161">If you intend to collocate the Mediation server on the Enterprise Edition Front End pool, ensure the check box is selected.</span></span> <span data-ttu-id="f2720-162">伺服器角色將會部署在池伺服器上。</span><span class="sxs-lookup"><span data-stu-id="f2720-162">The server role will be deployed on the pool servers.</span></span> <span data-ttu-id="f2720-163">如果您想要將中繼伺服器部署為獨立伺服器, 請清除適當的核取方塊。</span><span class="sxs-lookup"><span data-stu-id="f2720-163">If you intend to deploy the Mediation server as a stand-alone server, clear the appropriate check box.</span></span> <span data-ttu-id="f2720-164">在您完全部署前端伺服器之後, 您將會在個別的部署步驟中部署轉送伺服器。</span><span class="sxs-lookup"><span data-stu-id="f2720-164">You will deploy the Mediation server in a separate deployment step after you completely deploy the Front End server.</span></span> <span data-ttu-id="f2720-165">如需 collocation 的規劃詳細資料, 請參閱[商務用 Skype Server 的拓撲基礎](../../plan-your-deployment/topology-basics/topology-basics.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-165">For planning details about a collocation, see [Topology Basics for Skype for Business Server](../../plan-your-deployment/topology-basics/topology-basics.md).</span></span>
    
6. <span data-ttu-id="f2720-166">透過使用 [**關聯伺服器角色與此前端池**] 頁面, 您可以定義伺服器角色並將其與前端池建立關聯。</span><span class="sxs-lookup"><span data-stu-id="f2720-166">By using the **Associate server roles with this Front End pool** page, you can define and associate server roles with the Front End pool.</span></span> <span data-ttu-id="f2720-167">下列角色可供使用:</span><span class="sxs-lookup"><span data-stu-id="f2720-167">The following role is available:</span></span>
    
    <span data-ttu-id="f2720-168">**啟用邊緣池**定義並關聯單一邊緣伺服器或邊緣伺服器池。</span><span class="sxs-lookup"><span data-stu-id="f2720-168">**Enable an Edge pool** Defines and associates a single Edge Server or a pool of Edge Servers.</span></span> <span data-ttu-id="f2720-169">Edge 伺服器可協助組織內部使用者與組織外部人員之間的通訊與共同作業, 包括聯盟使用者。</span><span class="sxs-lookup"><span data-stu-id="f2720-169">An Edge Server facilitates communication and collaboration between users inside the organization and people outside the organization, including federated users.</span></span>
    
    <span data-ttu-id="f2720-170">您可以使用兩種可能的案例來部署及關聯伺服器角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-170">There are two possible scenarios that you can use to deploy and associate the server roles.</span></span>
    
    <span data-ttu-id="f2720-171">針對案例 1, 您正在定義新安裝的新拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-171">For scenario one, you are defining a new topology for a new installation.</span></span> <span data-ttu-id="f2720-172">您可以採用下列其中一種方法來進行安裝:</span><span class="sxs-lookup"><span data-stu-id="f2720-172">You can approach the installation in one of the two following ways:</span></span>
    
   - <span data-ttu-id="f2720-173">讓核取方塊保持清除, 然後定義拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-173">Leave the check box clear, and define the topology.</span></span> <span data-ttu-id="f2720-174">在您已發佈、設定及測試前端與後端伺服器角色之後, 您可以再次執行拓撲建立程式, 以將角色服務器新增到拓撲結構中。</span><span class="sxs-lookup"><span data-stu-id="f2720-174">After you have published, configured, and tested the Front End and Back End Server roles, you can run Topology Builder again to add the role servers to the topology.</span></span> <span data-ttu-id="f2720-175">使用此策略, 您可以測試執行 SQL Server 的前端池和伺服器, 而不需要額外的角色進一步複雜。</span><span class="sxs-lookup"><span data-stu-id="f2720-175">By using this strategy, you can test the Front End pool and the server running SQL Server without additional complications from additional roles.</span></span> <span data-ttu-id="f2720-176">完成初始測試之後, 您可以再次執行拓撲建立器, 以選取您需要部署的角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-176">After you have completed your initial testing, you can run Topology Builder again to select the roles you need to deploy.</span></span>
    
   - <span data-ttu-id="f2720-177">選取您要安裝的角色, 然後設定硬體以適應選取的角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-177">Select roles that you need to install, and then set up the hardware to accommodate the selected roles.</span></span>
    
     <span data-ttu-id="f2720-178">若是案例二, 就表示您已有部署, 且您的基礎結構已準備好使用新的角色, 或者您需要將現有角色與新的前端伺服器建立關聯。</span><span class="sxs-lookup"><span data-stu-id="f2720-178">For scenario two, you have an existing deployment, and your infrastructure is ready for new roles, or you need to associate existing roles with a new Front End server.</span></span>
    
   - <span data-ttu-id="f2720-179">在這種情況下, 您將會選取您想要部署或與新的前端伺服器建立關聯的角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-179">In this case, you will select the roles that you intend to deploy or associate with the new Front End server.</span></span> <span data-ttu-id="f2720-180">不論是哪一種情況, 您都會繼續定義角色、設定任何所需的硬體, 以及繼續安裝。</span><span class="sxs-lookup"><span data-stu-id="f2720-180">In either case, you will proceed with the definition of the roles, set up any needed hardware, and proceed with the installation.</span></span>
    
7. <span data-ttu-id="f2720-181">接下來, 您將定義將與拓撲搭配使用的 SQL Server 存放區。</span><span class="sxs-lookup"><span data-stu-id="f2720-181">Next, you will define the SQL Server store that will be used with the topology.</span></span> <span data-ttu-id="f2720-182">在這個範例中, 我們使用預設實例。</span><span class="sxs-lookup"><span data-stu-id="f2720-182">In this example, we use the Default instance.</span></span> <span data-ttu-id="f2720-183">如需 SQL Server 功能 (例如高可用性) 的詳細資訊, 請參閱[在商務用 Skype Server 中規劃高可用性和災害復原](../../plan-your-deployment/high-availability-and-disaster-recovery/high-availability-and-disaster-recovery.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-183">For more information about SQL Server features, such as High Availability, see [Plan for high availability and disaster recovery in Skype for Business Server](../../plan-your-deployment/high-availability-and-disaster-recovery/high-availability-and-disaster-recovery.md).</span></span>
    
   - <span data-ttu-id="f2720-184">若要使用已在拓撲中定義的現有 SQL Server store, 請選取 **[SQL store**] 中的實例。</span><span class="sxs-lookup"><span data-stu-id="f2720-184">To use an existing SQL Server store that has already been defined in your topology, select an instance from **SQL store**.</span></span>
    
   - <span data-ttu-id="f2720-185">若要定義新的 SQL Server 實例來儲存 [池資訊], 請按一下 [**新增**], 然後在 [**定義新的 sql store** ] 對話方塊中指定**SQL Server FQDN** 。</span><span class="sxs-lookup"><span data-stu-id="f2720-185">To define a new SQL Server instance to store pool information, click **New**, and then specify the **SQL Server FQDN** in the **Define New SQL Store** dialog box.</span></span>
    
   - <span data-ttu-id="f2720-186">若要指定 SQL Server 實例的名稱, 請選取 [**命名實例**], 然後指定實例的名稱。</span><span class="sxs-lookup"><span data-stu-id="f2720-186">To specify the name of a SQL Server instance, select **Named Instance**, and then specify the name of the instance.</span></span>
    
   - <span data-ttu-id="f2720-187">若要使用預設實例, 請按一下 [**預設實例**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-187">To use the default instance, click **Default instance**.</span></span>
    
   - <span data-ttu-id="f2720-188">若要使用 SQL 鏡像, 請選取 [**啟用 sql 鏡像**], 然後選取現有的實例, 或建立新的實例。</span><span class="sxs-lookup"><span data-stu-id="f2720-188">To use SQL Mirroring, select **Enable SQL mirroring**, and select an existing instance, or create a new instance.</span></span>

     > [!NOTE]
     > <span data-ttu-id="f2720-189">在商務用 Skype Server 2015 中提供 SQL 鏡像, 但商務用 Skype Server 2019 已不再支援。</span><span class="sxs-lookup"><span data-stu-id="f2720-189">SQL Mirroring is available in Skype for Business Server 2015 but is no longer supported in Skype for Business Server 2019.</span></span> <span data-ttu-id="f2720-190">使用商務用 Skype Server 2019 時, AlwaysOn 可用性群組、AlwaysOn 容錯移轉叢集實例 (FCI) 和 SQL 容錯移轉叢集方法都是可取的。</span><span class="sxs-lookup"><span data-stu-id="f2720-190">The  AlwaysOn Availability Groups, AlwaysOn Failover Cluster Instances (FCI), and SQL failover clustering methods are preferred with Skype for Business Server 2019.</span></span>
    
     <span data-ttu-id="f2720-191">在這個範例中, 我們會輸入**SQL SERVER FQDN**, 並設定任何相關的高可用性設定, 然後按一下 **[確定]**, 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-191">For this example, we enter the **SQL Server FQDN**, and configure any relevant high availability settings, and then click **OK**, as shown in the figure.</span></span>
    
     ![建立 SQL Server 存放區。](../../media/12822cf9-8608-43c0-94ce-2ca8b3a0ffd5.png)
  
8. <span data-ttu-id="f2720-193">決定是否要啟用 SQL Server store 鏡像或 SQL Server 鏡像見證, 然後按 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-193">Decide if you want to enable SQL Server store mirroring or SQL Server mirroring witness, and then click **Next**.</span></span>
    
9. <span data-ttu-id="f2720-194">定義您要使用的檔案共用。</span><span class="sxs-lookup"><span data-stu-id="f2720-194">Define the file share that you want to use.</span></span>
    
   - <span data-ttu-id="f2720-195">若要使用已在您的拓撲中定義的檔案共用, 請選取 [**使用先前定義**的檔案共用]。</span><span class="sxs-lookup"><span data-stu-id="f2720-195">To use a file share that has already been defined in your topology, select **Use a previously defined file share**.</span></span>
    
   - <span data-ttu-id="f2720-196">若要定義新的檔案共用, 請選取 [**定義新的檔案共用**], 在 [檔案**伺服器 FQDN** ] 方塊中, 輸入檔案共用所在之現有檔案伺服器的 FQDN, 然後在 [檔案**共用**] 方塊中輸入檔案共用的名稱。</span><span class="sxs-lookup"><span data-stu-id="f2720-196">To define a new file share, select **Define a new file share**, in the **File Server FQDN** box, enter the FQDN of the existing file server where the file share is to reside, and then enter a name for the file share in the **File Share** box.</span></span>
    
     <span data-ttu-id="f2720-197">在這個範例中, 我們將按一下 [**定義新的檔案存放區**]、輸入 [檔案**伺服器 FQDN** ] 和 [檔案**共用**], 然後按一下 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-197">For this example, we will click **Define a new file store**, enter the **file server FQDN** and **file share**, and then click **Next**.</span></span>
    
     > [!NOTE]
     > <span data-ttu-id="f2720-198">商務用 Skype Server 的檔案共用可以 collocated, 但出於效能考慮, 不建議您這麼做。</span><span class="sxs-lookup"><span data-stu-id="f2720-198">The file share for Skype for Business Server can be collocated but it is not recommended for performance reasons.</span></span> <span data-ttu-id="f2720-199">請注意, 在這個範例中, 檔案共用已位於將充當檔案共用的單一專用伺服器上。</span><span class="sxs-lookup"><span data-stu-id="f2720-199">Note that in this example, the file share has been located on a single dedicated server that will act as the file share.</span></span> <span data-ttu-id="f2720-200">不過, 我們建議使用其他更健壯的檔案共用系統 (例如使用 Windows Server 2012 R2 的 DFS)。</span><span class="sxs-lookup"><span data-stu-id="f2720-200">However, other more robust file share systems, such as DFS using Windows Server 2012 R2, are recommended.</span></span> <span data-ttu-id="f2720-201">如需支援的檔案共用系統的詳細資料, 請參閱[商務用 Skype 環境的需求](../../plan-your-deployment/requirements-for-your-environment/requirements-for-your-environment.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-201">For details about supported file share systems, see [Requirements for your Skype for Business environment](../../plan-your-deployment/requirements-for-your-environment/requirements-for-your-environment.md).</span></span> <span data-ttu-id="f2720-202">如需建立檔案共用的詳細資訊, 請參閱[在商務用 Skype 伺服器中建立檔案共用](create-a-file-share.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-202">For more information about creating the file share, see [Create a file share in Skype for Business Server](create-a-file-share.md).</span></span> <span data-ttu-id="f2720-203">您可以定義檔案共用, 但不需要建立檔案共用。</span><span class="sxs-lookup"><span data-stu-id="f2720-203">You can define the file share without the file share having been created.</span></span> <span data-ttu-id="f2720-204">您必須先在您定義的位置中建立檔案共用, 然後才能發佈拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-204">You will need to create the file share in the location you define before you publish the topology.</span></span> 
  
10. <span data-ttu-id="f2720-205">在 [指定 Web 服務 URL] 頁面上, 您必須決定是否需要覆寫內部 Web 服務池基底 URL。</span><span class="sxs-lookup"><span data-stu-id="f2720-205">On the Specify the Web Services URL page, you must decide if you need to override the internal Web Services pool base URL.</span></span> <span data-ttu-id="f2720-206">此覆寫的原因與負載平衡有關。</span><span class="sxs-lookup"><span data-stu-id="f2720-206">The reason for this override has to do with load balancing.</span></span> <span data-ttu-id="f2720-207">您可以透過簡單的 DNS 負載平衡來負載平衡基本 SIP 流量。</span><span class="sxs-lookup"><span data-stu-id="f2720-207">Basic SIP traffic can be load balanced through simple DNS load balancing.</span></span> <span data-ttu-id="f2720-208">不過, HTTP/S Web 服務網路流量必須使用支援的硬體或軟體負載平衡方案。</span><span class="sxs-lookup"><span data-stu-id="f2720-208">However, the HTTP/S Web Services network traffic must use a supported Hardware or Software load balancing solution.</span></span> <span data-ttu-id="f2720-209">如需支援的負載平衡器, 請參閱[商務用 Skype 的基礎結構](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways)。</span><span class="sxs-lookup"><span data-stu-id="f2720-209">For supported load balancers, see [Infrastructure for Skype for Business](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways).</span></span> <span data-ttu-id="f2720-210">在這個範例中, 我們使用了 SIP 流量的 DNS 負載平衡, 以及支援的軟體負載平衡方案。</span><span class="sxs-lookup"><span data-stu-id="f2720-210">In this example, we used DNS load balancing for SIP traffic and a supported software load balancing solution.</span></span> <span data-ttu-id="f2720-211">因為我們是以這種方式來分割通信量, 所以我們需要覆寫內部的 Web 服務池 FQDN。</span><span class="sxs-lookup"><span data-stu-id="f2720-211">Because we are dividing the traffic this way, we need to override the internal Web Services pool FQDN.</span></span> <span data-ttu-id="f2720-212">或者, 如果我們有最上層的負載平衡器, 而且透過它傳送所有流量, 而不是使用 SIP 流量的 DNS 負載平衡, 我們就不需要覆寫 Web 服務 URL。</span><span class="sxs-lookup"><span data-stu-id="f2720-212">Alternatively, if we had a top line load balancer and sent all traffic through it instead of using DNS load balancing for SIP traffic, we would not need to override the Web Services URL.</span></span> 
    
    <span data-ttu-id="f2720-213">在本主題的 [DNS] 區段中, 我們為 webint 建立了一個記錄。</span><span class="sxs-lookup"><span data-stu-id="f2720-213">In the DNS section of this topic, we created an A record for webint.contoso.local.</span></span> <span data-ttu-id="f2720-214">這是我們針對 web 服務 HTTP/S 流量所使用的 URL, 而且必須經過我們設定的支援軟體負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="f2720-214">This is the URL we are using for the web services HTTP/S traffic, and it must go through the supported software load balancer we set up.</span></span> <span data-ttu-id="f2720-215">因此, 在這個範例中, 我們會覆寫 URL, 讓商務用 Skype 伺服器知道所有的 HTTP/S 流量應該移至 webint, 而不是 pool. 當地, 如圖所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-215">Therefore, in this example, we override the URL to let Skype for Business Server know that all HTTP/S traffic should go to webint.contoso.local instead of pool.contoso.local, as shown in the figure.</span></span> <span data-ttu-id="f2720-216">如需有關負載平衡的詳細資訊, 請參閱[商務用 Skype 的負載平衡需求](../../plan-your-deployment/network-requirements/load-balancing.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-216">For more about load balancing, see [Load balancing requirements for Skype for Business](../../plan-your-deployment/network-requirements/load-balancing.md).</span></span>
    
    > [!IMPORTANT]
    > <span data-ttu-id="f2720-217">基底 URL 是 URL 的 Web 服務身分識別, 而不是 HTTPs://。</span><span class="sxs-lookup"><span data-stu-id="f2720-217">The base URL is the Web Services identity for the URL, minus the https://.</span></span> <span data-ttu-id="f2720-218">例如, 如果該池的 Web 服務的完整 URL 是https://webint.contoso.local, 則基底 url 是 webint。</span><span class="sxs-lookup"><span data-stu-id="f2720-218">For example, if the full URL for the Web Services of the pool is https://webint.contoso.local, the base URL is webint.contoso.local.</span></span> 
  
    - <span data-ttu-id="f2720-219">如果您正在設定 DNS 負載平衡, 請在這個範例中, 選取 [覆**寫內部 Web 服務池 FQDN** ] 核取方塊, 然後在**內部基礎 url**中輸入內部基本 url (必須與 [池 FQDN] 不同)。</span><span class="sxs-lookup"><span data-stu-id="f2720-219">If you are configuring DNS load balancing, as we are in this example, select the **Override internal Web Services pool FQDN** check box, and enter the internal base URL (which must be different from the pool FQDN) in **Internal Base URL**.</span></span> 
    
    > [!CAUTION]
    > <span data-ttu-id="f2720-220">如果您決定使用自行定義的 FQDN 來覆寫內部 Web 服務, 則每個 FQDN 都必須是與任何其他前端池、導演或控制器池都是唯一的。</span><span class="sxs-lookup"><span data-stu-id="f2720-220">If you decide to override the Internal Web Services with a self-defined FQDN, each FQDN must be unique from any other Front End pool, Director, or Director pool.</span></span> <span data-ttu-id="f2720-221">**僅使用標準字元**(包括 A-z、a-z、0-9 和連字號) 當您定義 Url 或完整功能變數名稱時。</span><span class="sxs-lookup"><span data-stu-id="f2720-221">**Use only standard characters** (including A-Z, a-z, 0-9, and hyphens) when you define URLs or fully qualified domain names.</span></span> <span data-ttu-id="f2720-222">請勿使用 Unicode 字元或底線。</span><span class="sxs-lookup"><span data-stu-id="f2720-222">Do not use Unicode characters or underscores.</span></span> <span data-ttu-id="f2720-223">外部 DNS 和公用憑證授權單位 (Ca) 通常不支援 URL 或 FQDN 中的非標準字元 (也就是, URL 或 FQDN 必須指派給憑證中的消費者名稱或消費者替換名稱時)。</span><span class="sxs-lookup"><span data-stu-id="f2720-223">Nonstandard characters in a URL or FQDN are often not supported by external DNS and public certification authorities (CAs) (that is, when the URL or FQDN must be assigned to the subject name or subject alternative name in the certificate).</span></span>
  
    - <span data-ttu-id="f2720-224">您也可以選擇在**外部基底 url**中輸入外部基底 url。</span><span class="sxs-lookup"><span data-stu-id="f2720-224">Optionally, enter the external base URL in **External Base URL**.</span></span> <span data-ttu-id="f2720-225">您可以輸入外部基底 URL, 以將它與您的內部功能變數名稱區分開來。</span><span class="sxs-lookup"><span data-stu-id="f2720-225">You would enter the external base URL to differentiate it from your internal domain name.</span></span> <span data-ttu-id="f2720-226">例如, 您的內部網域是 contoso. 本機, 但是您的外部功能變數名稱是 contoso.com。</span><span class="sxs-lookup"><span data-stu-id="f2720-226">For example, your internal domain is contoso.local, but your external domain name is contoso.com.</span></span> <span data-ttu-id="f2720-227">您可以使用 contoso.com 功能變數名稱定義 URL, 因為它必須可從公用 DNS 解析。</span><span class="sxs-lookup"><span data-stu-id="f2720-227">You would define the URL using the contoso.com domain name since it must be resolvable from public DNS.</span></span> <span data-ttu-id="f2720-228">在反向 proxy 的情況下, 這也很重要。</span><span class="sxs-lookup"><span data-stu-id="f2720-228">This is also important in the case of a reverse proxy.</span></span> <span data-ttu-id="f2720-229">外部基底 URL 功能變數名稱會與反向 proxy 的 FQDN 功能變數名稱相同。</span><span class="sxs-lookup"><span data-stu-id="f2720-229">The external base URL domain name would be the same as the domain name of the FQDN of the reverse proxy.</span></span> <span data-ttu-id="f2720-230">在行動用戶端上的立即訊息和目前狀態, 必須具備對前端池的 HTTP 存取權。</span><span class="sxs-lookup"><span data-stu-id="f2720-230">HTTP access to the Front End pool is required for instant messaging and presence on mobile clients.</span></span>
    
      ![覆寫 web 服務。](../../media/8f95313c-2df4-4885-adc5-9fc9ea775406.png)
  
11. <span data-ttu-id="f2720-232">如果您在 [**選取功能**] 頁面上選取 [**會議**], 系統會要求您選取 Office Web Apps 伺服器。</span><span class="sxs-lookup"><span data-stu-id="f2720-232">If you selected **Conferencing** on the **Select Features** page, you will be asked to select an Office Web Apps server.</span></span> <span data-ttu-id="f2720-233">按一下 [**新增**] 以開啟對話方塊。</span><span class="sxs-lookup"><span data-stu-id="f2720-233">Click **New** to launch the dialog box.</span></span>
    
12. <span data-ttu-id="f2720-234">在 [**定義新的 Office Web Apps 伺服器**] 對話方塊的 [ **Office WEB apps server FQDN** ] 方塊中, 輸入您的 OFFICE web apps 伺服器 fqdn;當您這樣做時, 您的 Office Web Apps 伺服器探索 URL 應該會自動輸入至 [ **Office Web Apps server 探索 url** ] 方塊中。</span><span class="sxs-lookup"><span data-stu-id="f2720-234">In the **Define New Office Web Apps Server** dialog box, type the FQDN of your Office Web Apps server in the **Office Web Apps Server FQDN** box; when you do this, your Office Web Apps server discovery URL should automatically be entered into the **Office Web Apps Server discovery URL** box.</span></span>
    
    <span data-ttu-id="f2720-235">如果 Office Web Apps 伺服器已安裝于內部部署, 且在與商務用 Skype Server 相同的網路區域中, 請勿選取 [ **Office Web Apps 伺服器] 部署在外部網路 (也就是 [週邊/網際網路])**。</span><span class="sxs-lookup"><span data-stu-id="f2720-235">If the Office Web Apps server is installed on-premises and in the same network zone as Skype for Business Server, do not select the option **Office Web Apps Server is deployed in an external network (that is, perimeter/Internet)**.</span></span>
    
    <span data-ttu-id="f2720-236">如果 Office Web Apps 伺服器是在您的內部防火牆外部署, 請選取 [ **Office Web Apps 伺服器] 部署在外部網路 (也就是 [週邊/網際網路])**。</span><span class="sxs-lookup"><span data-stu-id="f2720-236">If the Office Web Apps server is deployed outside your internal firewall, select the option **Office Web Apps Server is deployed in an external network (that is, perimeter/Internet)**.</span></span>
    
13. <span data-ttu-id="f2720-237">按一下 **[完成]** 以完成設定。</span><span class="sxs-lookup"><span data-stu-id="f2720-237">Click **Finish** to complete the configuration.</span></span> <span data-ttu-id="f2720-238">如果您在 [**關聯伺服器角色與此前端池**] 頁面上定義其他角色服務器, 則會開啟 [個別角色配置] 嚮導頁面, 您可以在其中設定伺服器角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-238">If you defined other role servers on the **Associate server roles with this Front End pool** page, separate role configuration wizard pages will open where you can configure the server roles.</span></span> <span data-ttu-id="f2720-239">在這個範例中, 我們只選擇 [會議]。</span><span class="sxs-lookup"><span data-stu-id="f2720-239">In this example we only chose conferencing.</span></span>
    
### <a name="configure-simple-urls"></a><span data-ttu-id="f2720-240">設定簡單的 Url</span><span class="sxs-lookup"><span data-stu-id="f2720-240">Configure simple URLs</span></span>

1. <span data-ttu-id="f2720-241">在拓撲建立器中, 以滑鼠右鍵按一下**商務用 Skype Server** top 節點, 然後按一下 [**編輯屬性**], 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-241">In Topology Builder, right-click the **Skype for Business Server** top node, and then click **Edit Properties**, as shown in the figure.</span></span>
    
     ![以滑鼠右鍵按一下 [商務用 Skype 伺服器], 然後選取 [編輯屬性]。](../../media/692c18dd-8e99-4239-ae7b-5e855d866afa.png)
  
2. <span data-ttu-id="f2720-243">在 [**簡易 url** ] 窗格中, 選取 [**電話存取 url:** (撥入)] 或 [**會議 url:** (見面)] 進行編輯, 然後按一下 [**編輯 URL**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-243">In the **Simple URLs** pane, select either **Phone access URLs:** (Dial-in) or **Meeting URLs:** (Meet) to edit, and then click **Edit URL**.</span></span>
    
3. <span data-ttu-id="f2720-244">更新 URL 至您想要的值, 然後按一下 **[確定]** 以儲存編輯的 URL。</span><span class="sxs-lookup"><span data-stu-id="f2720-244">Update the URL to the value you want, and then click **OK** to save the edited URL.</span></span> <span data-ttu-id="f2720-245">您應該使用外部 SIP 網域設定簡單的 URL, 讓外部使用者可以加入會議, 例如 contoso.com (外部), 而不是 contoso. local, 這是內部網域。</span><span class="sxs-lookup"><span data-stu-id="f2720-245">You should configure the simple URL using the external SIP domain so that external users can join meetings, for example, contoso.com, which is external, as opposed to contoso.local, which is an internal domain.</span></span> <span data-ttu-id="f2720-246">因此, SIP 網域應該能夠由外部 DNS 來解析。</span><span class="sxs-lookup"><span data-stu-id="f2720-246">Thus, the SIP domain should be able to be resolved by external DNS.</span></span>
    
4. <span data-ttu-id="f2720-247">如有需要, 請使用相同的步驟編輯 [認識 URL]。</span><span class="sxs-lookup"><span data-stu-id="f2720-247">Edit the Meet URL by using the same steps, if necessary.</span></span>
    
### <a name="to-define-the-optional-admin-simple-url"></a><span data-ttu-id="f2720-248">定義選用的系統管理員簡易 URL</span><span class="sxs-lookup"><span data-stu-id="f2720-248">To define the optional Admin simple URL</span></span>

1. <span data-ttu-id="f2720-249">在拓撲建立器中, 以滑鼠右鍵按一下**商務用 Skype Server**節點, 然後按一下 [**編輯屬性**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-249">In Topology Builder, right-click the **Skype for Business Server** node, and then click **Edit Properties**.</span></span>
    
2. <span data-ttu-id="f2720-250">在 [**管理存取 url** ] 方塊中, 輸入您想要的管理存取商務用 Skype Server [控制台] 的簡單 URL, 然後按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-250">In the **Administrative access URL** box, enter the simple URL you want for administrative access to Skype for Business Server Control Panel, and then click **OK**.</span></span>
    
    > [!TIP]
    > <span data-ttu-id="f2720-251">我們建議您使用最簡單的管理 URL URL。</span><span class="sxs-lookup"><span data-stu-id="f2720-251">We recommend using the simplest possible URL for the Admin URL.</span></span> <span data-ttu-id="f2720-252">最簡單的選項https://admin就是。_ \<網域\>_。</span><span class="sxs-lookup"><span data-stu-id="f2720-252">The simplest option is https://admin. _\<domain\>_.</span></span> <span data-ttu-id="f2720-253">系統管理員 URL 可以是內部或外部網域 (例如 contoso. local 或 contoso.com), 只要任何一種記錄都可在內部 DNS 中解析。</span><span class="sxs-lookup"><span data-stu-id="f2720-253">The Admin URL can be either an internal or external domain, for example, contoso.local or contoso.com, as long as either record is resolvable in internal DNS.</span></span> 
  
    > [!IMPORTANT]
    > <span data-ttu-id="f2720-254">如果您在初始部署之後變更簡單的 URL, 您必須知道哪些變更會影響您的網域名稱系統 (DNS) 記錄及簡單 Url 的憑證。</span><span class="sxs-lookup"><span data-stu-id="f2720-254">If you change a simple URL after initial deployment, you must be aware of what changes impact your Domain Name System (DNS) records and certificates for simple URLs.</span></span> <span data-ttu-id="f2720-255">如果變更會影響簡單 URL 的基底, 您也必須變更 DNS 記錄和憑證。</span><span class="sxs-lookup"><span data-stu-id="f2720-255">If the change impacts the base of a simple URL, you must change the DNS records and certificates, too.</span></span> <span data-ttu-id="f2720-256">例如, 從https://sfb.contoso.com/Meet sfb.contoso.com https://meet.contoso.com變更為 MEET.CONTOSO.COM 的基底 URL, 因此您必須將 DNS 記錄和憑證變更為參照 meet.contoso.com。</span><span class="sxs-lookup"><span data-stu-id="f2720-256">For example, changing from https://sfb.contoso.com/Meet to https://meet.contoso.com changes the base URL from sfb.contoso.com to meet.contoso.com, so you would need to change the DNS records and certificates to refer to meet.contoso.com.</span></span> <span data-ttu-id="f2720-257">如果您將簡單的 URL 改https://sfb.contoso.com/Meet為https://sfb.contoso.com/Meetings[寄件者], 則 SFB.CONTOSO.COM 的基底 url 會保持不變, 因此不需要變更 DNS 或憑證。</span><span class="sxs-lookup"><span data-stu-id="f2720-257">If you changed the simple URL from https://sfb.contoso.com/Meet to https://sfb.contoso.com/Meetings, the base URL of sfb.contoso.com stays the same, so no DNS or certificate changes are needed.</span></span> <span data-ttu-id="f2720-258">不過, 每當您變更簡單的 URL 名稱時, 您必須在每個主管和前端伺服器上執行**Enable-CsComputer** Cmdlet, 才能註冊變更。</span><span class="sxs-lookup"><span data-stu-id="f2720-258">Whenever you change a simple URL name, however, you must run the **Enable-CsComputer** cmdlet on each Director and Front End server to register the change.</span></span>
  
### <a name="publish-and-verify-the-topology"></a><span data-ttu-id="f2720-259">發佈並驗證拓撲</span><span class="sxs-lookup"><span data-stu-id="f2720-259">Publish and verify the topology</span></span>

1. <span data-ttu-id="f2720-260">檢查所有簡單的 Url 是否已正確設定。</span><span class="sxs-lookup"><span data-stu-id="f2720-260">Check that all simple URLs are configured correctly.</span></span>
    
2. <span data-ttu-id="f2720-261">確認 SQL Server 型伺服器已在線上且可供安裝拓撲產生器的電腦使用, 包括任何必要的防火牆規則。</span><span class="sxs-lookup"><span data-stu-id="f2720-261">Confirm that the SQL Server-based server is online and available to the computer where Topology Builder is installed, including any necessary firewall rules.</span></span>
    
3. <span data-ttu-id="f2720-262">確認檔案共用可用, 且已定義適當的許可權。</span><span class="sxs-lookup"><span data-stu-id="f2720-262">Confirm that the file share is available and that the proper permissions are defined.</span></span>
    
4. <span data-ttu-id="f2720-263">確認拓撲中定義符合部署需求的正確伺服器角色。</span><span class="sxs-lookup"><span data-stu-id="f2720-263">Confirm that the correct server roles that meet the deployment requirements are defined in the topology.</span></span>
    
5. <span data-ttu-id="f2720-264">確認伺服器已存在於 Active Directory 網域服務 (AD DS) 中。</span><span class="sxs-lookup"><span data-stu-id="f2720-264">Verify that the servers exist in Active Directory Domain Services (AD DS).</span></span> <span data-ttu-id="f2720-265">當您將伺服器加入網域時會自動發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="f2720-265">This happens automatically when you join the servers to the domain.</span></span>
    
    <span data-ttu-id="f2720-266">驗證拓朴且沒有驗證錯誤時, 您應該準備好發佈拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-266">When you have verified the topology and there are no validation errors, you should be ready to publish the topology.</span></span> <span data-ttu-id="f2720-267">如果有驗證錯誤, 您必須先更正, 才能發佈拓撲。</span><span class="sxs-lookup"><span data-stu-id="f2720-267">If there are validation errors, you must correct them before you can publish the topology.</span></span>
    
6. <span data-ttu-id="f2720-268">以滑鼠右鍵按一下**商務用 Skype Server**節點, 然後按一下 [**發佈拓撲**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-268">Right-click the **Skype for Business Server** node, and then click **Publish Topology**.</span></span>
    
7. <span data-ttu-id="f2720-269">在 [**發佈拓撲**] 頁面上, 按一下 **[下一步]**。</span><span class="sxs-lookup"><span data-stu-id="f2720-269">On the **Publish the topology** page, click **Next**.</span></span>
    
8. <span data-ttu-id="f2720-270">在 [**選取中央管理伺服器**] 頁面上, 選取 [前端] 池, 如圖中所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-270">On the **Select Central Management Server** page, select a Front End pool, as shown in the figure.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="f2720-271">您可以按一下 [**高級**] 來設定資料庫檔案位置。</span><span class="sxs-lookup"><span data-stu-id="f2720-271">You can click **Advanced** to configure database file locations.</span></span>
  
     ![選取 [中央管理商店伺服器]。](../../media/764478b5-8480-42c5-854f-649bb121cd94.png)
  
9. <span data-ttu-id="f2720-273">在 [**選取資料庫**] 頁面上, 選取您要發佈的資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-273">On the **Select databases** page, select the databases you want to publish.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="f2720-274">如果您沒有建立資料庫的適當許可權, 您可以清除這些資料庫旁邊的核取方塊, 而具有適當許可權的人員就可以在稍後建立資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-274">If you don't have the appropriate rights to create the databases, you can clear the check boxes next to those databases, and someone with appropriate rights can later create the databases.</span></span> <span data-ttu-id="f2720-275">如需需求的詳細資訊, 請參閱[商務用 Skype server 的伺服器需求](../../plan-your-deployment/requirements-for-your-environment/server-requirements.md)。</span><span class="sxs-lookup"><span data-stu-id="f2720-275">For details about requirements, see [Server requirements for Skype for Business Server](../../plan-your-deployment/requirements-for-your-environment/server-requirements.md).</span></span> 
  
10. <span data-ttu-id="f2720-276">您也可以按一下 [**高級**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-276">Optionally click **Advanced**.</span></span> <span data-ttu-id="f2720-277">透過使用 [高級 SQL Server 資料檔位置] 選項, 您可以選取下列選項:</span><span class="sxs-lookup"><span data-stu-id="f2720-277">By using Advanced SQL Server data file placement options, you can select between the following options:</span></span> 
    
    - <span data-ttu-id="f2720-278">**自動判斷資料庫檔案位置**: 此選項會將記錄和資料檔案散佈到最佳位置, 以根據您的 SQL server 伺服器上的磁片設定來判斷最佳操作效能。</span><span class="sxs-lookup"><span data-stu-id="f2720-278">**Automatically determine database file location** - This option determines the best operational performance based on the disk configuration on your SQL Server-based server by distributing the log and data files to the best location.</span></span>
    
    - <span data-ttu-id="f2720-279">**使用 SQL Server 實例預設值**-此選項使用實例設定, 將記錄和資料檔案放到 SQL server 的伺服器。</span><span class="sxs-lookup"><span data-stu-id="f2720-279">**Use SQL Server instance defaults** - This option puts log and data files onto the SQL Server-based server by using the instance settings.</span></span> <span data-ttu-id="f2720-280">這個選項不會使用 SQL Server server 伺服器的操作功能來判斷記錄和資料的最佳位置。</span><span class="sxs-lookup"><span data-stu-id="f2720-280">This option does not use the operational functionality of the SQL Server-based server to determine optimal locations for logs and data.</span></span> <span data-ttu-id="f2720-281">SQL Server 系統管理員通常會將記錄和資料檔移至適合 SQL Server 服務器與組織管理程式的位置。</span><span class="sxs-lookup"><span data-stu-id="f2720-281">The SQL Server administrator would typically move the log and data files to locations that are appropriate for the SQL Server-based server and organization management procedures.</span></span>
    
    <span data-ttu-id="f2720-282">按一下 **[確定]**, 然後按 **[下一步**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-282">Click **OK**, and then click **Next**.</span></span> 
    
11. <span data-ttu-id="f2720-283">或者, 按一下 [**高級**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-283">Optionally, click **Advanced**.</span></span> <span data-ttu-id="f2720-284">透過使用 [高級 SQL Server 資料檔位置] 選項, 您可以選取下列選項:</span><span class="sxs-lookup"><span data-stu-id="f2720-284">By using Advanced SQL Server data file placement options, you can select between the following options:</span></span> 
    
    - <span data-ttu-id="f2720-285">**自動判斷資料庫檔案位置**: 此選項會將記錄和資料檔案散佈到最佳位置, 以根據您的 SQL server 伺服器上的磁片設定來判斷最佳操作效能。</span><span class="sxs-lookup"><span data-stu-id="f2720-285">**Automatically determine database file location** - This option determines the best operational performance based on the disk configuration on your SQL Server-based server by distributing the log and data files to the best location.</span></span>
    
    - <span data-ttu-id="f2720-286">**使用 SQL Server 實例預設值**-此選項使用實例設定, 將記錄和資料檔案放到 SQL server 的伺服器。</span><span class="sxs-lookup"><span data-stu-id="f2720-286">**Use SQL Server instance defaults** - This option puts log and data files onto the SQL Server-based server by using the instance settings.</span></span> <span data-ttu-id="f2720-287">這個選項不會使用 SQL Server server 伺服器的操作功能來判斷記錄和資料的最佳位置。</span><span class="sxs-lookup"><span data-stu-id="f2720-287">This option does not use the operational functionality of the SQL Server-based server to determine optimal locations for logs and data.</span></span> <span data-ttu-id="f2720-288">SQL Server 系統管理員通常會將記錄和資料檔移至適合 SQL Server 服務器與組織管理程式的位置。</span><span class="sxs-lookup"><span data-stu-id="f2720-288">The SQL Server administrator would typically move the log and data files to locations that are appropriate for the SQL Server-based server and organization management procedures.</span></span>
    
    <span data-ttu-id="f2720-289">按一下 [確定]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="f2720-289">Click **OK**.</span></span>
    
12. <span data-ttu-id="f2720-290">按一下 **[下一步]** 以完成發佈程式。</span><span class="sxs-lookup"><span data-stu-id="f2720-290">Click **Next** to complete the publishing process.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="f2720-291">此步驟的常見失敗是無法建立 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="f2720-291">A common failure for this step is that the SQL Server databases cannot be created.</span></span> <span data-ttu-id="f2720-292">當程式無法完成時, 會提供錯誤, 如圖所示。</span><span class="sxs-lookup"><span data-stu-id="f2720-292">When the process cannot complete, an error is provided, as shown in the figure.</span></span> <span data-ttu-id="f2720-293">最可能的原因是, 試圖建立資料庫的使用者沒有適當的許可權, 或由於防火牆或其他網路問題而無法聯絡 SQL Server 系統。</span><span class="sxs-lookup"><span data-stu-id="f2720-293">The most likely cause is that the user attempting to create the database does not have the appropriate permissions, or the SQL Server system cannot be contacted due to a firewall or other network issue.</span></span> 
  
     ![建立中央管理儲存區時發生錯誤。](../../media/558bd2e4-2721-422d-9986-df86f642e6a1.png)
  
13. <span data-ttu-id="f2720-295">發佈程式完成後, 您會看到一個連結, 以開啟後續步驟的清單。</span><span class="sxs-lookup"><span data-stu-id="f2720-295">When the publishing process completes, you are presented with a link to open a list of next steps.</span></span> <span data-ttu-id="f2720-296">按一下 [**按一下這裡以開啟待辦事項清單**] 來查看後續步驟, 然後按一下 **[完成**]。</span><span class="sxs-lookup"><span data-stu-id="f2720-296">Click **Click here to open to-do list** to view the next steps, and then click **Finish**.</span></span> 
    
    <span data-ttu-id="f2720-297">資料庫建立的 [完成後的警告] 訊息並不表示發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="f2720-297">The "Completed with warnings" message for the database creation does not mean there was an error.</span></span> <span data-ttu-id="f2720-298">安裝程式必須在 SQL Server 中變更 [商務用 Skype 伺服器] 的設定, 才能正常運作。</span><span class="sxs-lookup"><span data-stu-id="f2720-298">The installation process has to change settings in SQL Server for Skype for Business Server to work correctly.</span></span> <span data-ttu-id="f2720-299">當您在 SQL Server 中變更設定時, 系統會將其記錄為警告, 讓 SQL Server 系統管理員確切瞭解安裝程式已完成的內容。</span><span class="sxs-lookup"><span data-stu-id="f2720-299">When a setting is changed in SQL Server, it is logged as a warning so that SQL Server administrators can understand exactly what the installation process completed.</span></span> <span data-ttu-id="f2720-300">如果您收到警告, 您可以選取記錄, 然後按一下 [**查看**記錄], 以查看警告的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="f2720-300">If you receive a warning, you can select the record, and then click **View Logs** to view the details of the warning.</span></span>
    
    <span data-ttu-id="f2720-301">當拓撲成功發佈之後, 您就可以開始在拓撲中執行商務用 Skype Server 的每台伺服器上安裝中央管理存儲的本機複本。</span><span class="sxs-lookup"><span data-stu-id="f2720-301">When the topology has been successfully published, you can begin installing a local replica of the Central Management store on each server running Skype for Business Server in your topology.</span></span> <span data-ttu-id="f2720-302">我們建議您從第一個前端池開始。</span><span class="sxs-lookup"><span data-stu-id="f2720-302">We recommend that you begin with the first Front End pool.</span></span> 
    

