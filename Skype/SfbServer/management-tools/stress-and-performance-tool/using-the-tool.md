---
title: 使用商務用 Skype Server 2015 應力和效能工具
ms.reviewer: ''
ms.author: v-cichur
author: cichur
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: 若要執行商務用 Skype Server 2015 的壓力和效能工具，您必須能夠管理使用者、連絡人和使用者設定檔、設定執行的工具，然後查看工具所產生的輸出或結果。
ms.openlocfilehash: 6db23c259aa19e8ec9e590218ff233461c677aa0
ms.sourcegitcommit: 556fffc96729150efcc04cd5d6069c402012421e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/26/2021
ms.locfileid: "58586875"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>使用商務用 Skype Server 2015 應力和效能工具
 
若要執行商務用 Skype Server 2015 的壓力和效能工具，您必須能夠管理使用者、連絡人和使用者設定檔、設定執行的工具，然後查看工具所產生的輸出或結果。
  
執行商務用 Skype Server 2015 的壓力和效能工具時，有四個方面會 LyncPerfTool.exe) 執行 (：
  
- [建立使用者和連絡人](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [設定使用者設定檔](using-the-tool.md#BKMK_UserProfile)
    
- [執行 LyncPerfTool](using-the-tool.md#BKMK_RunTool)
    
- [解讀結果](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>建立使用者和連絡人
<a name="BKMK_CreateUsersAndContacts"> </a>

您必須使用商務用 Skype Server 2015 (SB 2015) 使用者布建工具 (UserProvisioningTool.exe) ，為您的壓力和效能測試建立使用者和連絡人。
  
這是您閱讀主題時，可能會很有用的有用字詞清單：
  
- **組織單位** -Active Directory 網域服務 (AD DS) 組織單位 (OU) 。
    
- 同盟 **/跨區集** 區-可以與其他立即訊息 (IM) 服務的使用者進行通訊的使用者。
    
- **通訊群組清單** 或 DLs。 這些是 AD DS 中包含 AD DS 使用者清單的物件。 它們是用來協助跨使用者群組進行通訊。
    
- **位置資訊服務**-商務用 Skype Server 2015 服務，啟用並設定每個電話時，允許檢索增強型 911 (E911) 服務的實體位置。
    
- **美國電話號碼**-電話指派給使用者的號碼，除了用於路由撥入和撥出電話的 SIP URI 以外， (RNL) 。
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>使用 UserProvisioningTool.exe 建立使用者和連絡人

> [!NOTE]
> 在您開始之前，請務必確定您已以 Domain Admins 安全性群組成員的身分登入，以執行此工具。 您必須這麼做，因為您即將建立 Active Directory 使用者。 
  
您必須使用商務用 Skype Server 使用者布建工具，以建立負載模擬的使用者和連絡人。
  
**商務用 Skype Server 使用者** 布建工具隨 **商務用 Skype Server 壓力和效能工具** 套件一起安裝。 請確定套件安裝程式 (CapacityPlanningTool.msi) 已在前端伺服器或您想要測試的 Standard Edition 伺服器上執行。
  
您可以執行商務用 Skype Server 使用者布建工具，方法是執行 UserProvisioningTool.exe (位於前端伺服器或 Standard Edition 伺服器上的% InstalledDirectory% LyncStressAndPerfTool \ LyncStress) 。
  
> [!IMPORTANT]
> 當您建立大量使用者 (例如10000或更多) 時，請執行 UserProvisioningTool.exe。 您必須這麼做，因為工具將會建立及設定  *新*  的 AD 使用者。
  
當使用者布建工具開啟時，按一下 [設定]，然後選取 [負載設定]。 
  
若要開始設定使用者和連絡人，請載入套件（稱為「SampleData.xml」）隨附的預設檔案。 這將會預填充具有範例資料的欄位，您需要變更這些資料，使其與您的部署相關。
  
如果您有預先設定的 XML 檔案，而該檔案已包含您的自訂設定，則可以改為載入該檔案。 填寫使用者布建工具中的欄位，如以下各節所述。
  
### <a name="to-configure-server-options"></a>若要設定伺服器選項：

1. 在 [**前端集區 FQDN** ] 欄位中，輸入 Standard Edition 伺服器的完整功能變數名稱 (FQDN) ，或您要主控使用者之前端集區的名稱。
    
2. 在 [ **使用者名稱首碼** ] 欄位中，輸入您要用來 bust 用於測試目的的使用者名稱的前置詞 (例如 "TestUser" ) 。
    
3. 在 [ **密碼** ] 欄位中，輸入將在所有測試使用者帳戶中使用的密碼。
    
4. 在 [ **帳戶網域** ] 欄位中，輸入您目前 AD 網域的功能變數名稱 (您想要在其中建立測試使用者) 的功能變數名稱。
    
5. 在 [ **組織單位** ] 欄位中，輸入您要建立這些測試使用者的 AD 網功能變數名稱稱。  (如果 OU 尚不存在，則會為您建立) 。
    
6. 在 [**電話地區碼**] 欄位中，輸入要在所有測試使用者帳戶中使用的三位數區功能變數代碼。 請確認您所選擇的地區代碼與 AD 中的其他使用者區功能變數代碼不會發生衝突。
    
7. 如果您想要啟用企業語音的測試使用者，請按一下以選取 **語音啟用** 核取方塊。
    
8. 在 [ **使用者數目** ] 欄位中，指定您要建立的測試使用者總數。
    
9. 在 [ **起始索引** ] 欄位中，提供要做為使用者名稱首碼尾碼的起始編號 (例如，首碼為 "TestUser"，第一個名稱會在下列範例中以 "0" 結尾。 ) 
    
     ![使用者布建工具，顯示 [使用者建立] 索引標籤。](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>建立使用者按鈕

當您按一下 [ **建立使用者** ] 按鈕時，會驗證您輸入的輸入參數。 如果有任何驗證錯誤，系統會提示您修正這些錯誤。 或者，如果所有值都正確，使用者就會開始出現在 AD (中所指定) 的任何 OU。 您會在工具執行時看到進度列。 當進度列處於作用中狀態時，請勿關閉應用程式。
  
使用者建立需要一些時間，因此請據此規劃。 在幾分鐘內，此程式可能需要數分鐘的時間，以供大量的使用者使用。
  
若您的測試環境中沒有 AD 網域控制站的存取權，您仍然可以以您指定要建立的使用者範圍之一的使用者身分登入，以驗證使用者的建立。 請記得使用前置詞和尾碼，以及 @sipDomain 做為使用者名稱。 以下為範例：  <em>TestUser20@contoso.net</em>  。
  
> [!NOTE]
> 如果使用者已存在，按一下 [建立使用者] 按鈕將會以任何設定變更進行更新。 
  
#### <a name="delete-users-button"></a>[刪除使用者] 按鈕

當您按一下 [ **刪除使用者** ] 按鈕時，將會驗證索引標籤的輸入參數。 如果有驗證錯誤，系統會提示您修正這些錯誤，如果輸入值正確，就會停用指定的測試使用者，並將其從 Active Directory 中刪除。 同樣地，進度列會出現在此索引標籤的底部，而且您不應該在進度列處於作用中時關閉應用程式。
  
> [!NOTE]
> 只支援 U.S. 格式的電話號碼。 電話號碼一定會指派給使用者，而且所有由 UserProvisioningTool.exe 所建立的使用者預設都會啟用企業語音。 使用電話號碼的任何案例（如會議自動語音應答或 UC-PSTN 通話）都會使用此電話號碼來正確地路由通話。 因此，  *每個使用者*  都必須有 *唯一的電話號碼*  。
  
> [!NOTE]
> **如果您必須建立使用者兩次，除非您使用不同的區號，或是先前的使用者已使用 Disable-CsUser Cmdlet 停用，否則命令將會失敗。**
  
> [!IMPORTANT]
> 建立連絡人之前，您必須先完成從 [使用者] 索引標籤執行的使用者複寫 () 。 
  
> [!IMPORTANT]
> 如果您剛剛建立使用者，必須等到商務用 Skype Server 複寫完成，並填入資料庫中的使用者帳戶。 **如果使用者尚未完成複寫，您會看到錯誤。** 如果已啟動商務用 Skype Server 2015 前端服務，或是成功于您指定之總數的最後一個使用者上執行 Get-CsUser Cmdlet，您就會知道使用者何時完成複製。
  
#### <a name="contacts-creation-tab"></a>[建立連絡人] 索引標籤

此索引標籤可讓您為使用者提供測試的連絡人詳細資料。
  
![顯示 [內容建立] 索引標籤的使用者布建工具。](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>若要設定使用者的連絡人，請執行下列操作：

1. 在 [ **每位使用者的平均連絡人** ] 欄位中，輸入要在連絡人清單中為每位使用者填入的平均連絡人人數。
    
2. 如果您想要為每位使用者建立相同數目的連絡人，請選取 [ **固定** ] 核取方塊。 如果您想要改變為使用者建立的連絡人數目，請清除該核取方塊。
    
3. 在 [ **每位使用者的平均連絡人群組** ] 欄位中，輸入每位使用者的連絡人群組數目。 此號碼必須小於 **每位使用者的平均連絡人** 數目。
    
4. 在 [同盟 **/跨集區連絡人百分比** ] 欄位中，指定介於0到100之間的數位。 這則會以同盟使用者的連絡方式建立此百分比。
    
5. 在 [同盟 **/跨集區使用者前置** 詞] 欄位中，提供將新增至本機使用者連絡人清單的同盟使用者的使用者名稱。
    
6. 在 [同盟 **/跨集區使用者 SIP 網域** ] 欄位中，授與同盟使用者的 SIP 功能變數名稱。
    
7. 在 [ **使用者建立** ] 索引標籤中，確定資訊正確無誤。 您的連絡人將從 [使用者建立] 索引標籤上的值建立。
    
8. 按一下 [ **建立連絡人** ] 以開始建立連絡人。 此程式可能需要數分鐘的時間。 完成後，會出現一個對話方塊，其中會出現「作業已順利完成」的對話方塊。 您可以使用 [使用者建立] 索引標籤上所建立的使用者來驗證所建立的連絡人。
    
    > [!NOTE]
    > 建立連絡人之後，此工具將會重新開機目標集區中的所有前端伺服器。 這可能需要較長 (2) 小時的時間，前端伺服器才能啟動，視這個作業建立的連絡人數目而定。 
  
#### <a name="distribution-list"></a>通訊群組清單

商務用 Skype Server 2015 的壓力和效能工具可以模擬商務用 Skype 2015 用戶端中的通訊群組清單 (DL) 擴充功能。 如果您不想要在使用者布建工具中啟用 DL 擴充，可以略過此步驟。
  
![使用者布建工具，顯示 [通訊群組清單建立] 索引標籤。](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
[通訊群組清單] 索引標籤可讓您建立壓力和效能工具將用於通訊群組清單擴充功能的 DLs。 在建立 DLs 之前，必須先部署商務用 Skype Server 2015 （包括已執行 ForestPrep）。 如果不這麼做，則會在 AD 架構中不會存在 DL 屬性，因此工具將無法建立 DLs。
  
### <a name="to-configure-distribution-lists"></a>若要設定通訊群組清單：

1. 在 [ **通訊群組清單數目** ] 欄位中，提供您想要建立的 DLs 總數 (這裡的建議是，您開始的值是您所擁有的使用者數目的兩倍。 ) 。
    
2. 在 [ **通訊群組清單前置** 詞] 欄位中，輸入您建立的所有 DLs 所擁有的首碼，例如 *testDL*  。 這表示，在 100 DLs，您的 DL 名稱將如下所示： testDL0、testDL1、高達 testDL99。
    
3. 在 [ **Dist] 清單中的 [最低成員** ] 欄位中，輸入要放在每個 DL 中的最少使用者數目。
    
4. 在 [ **Dist] 清單中的 [最大成員** ] 欄位中，輸入要新增在每個 DL 中的使用者數目上限。
    
#### <a name="create-distribution-lists-button"></a>建立通訊群組清單按鈕

當您按一下 [建立通訊群組清單] 按鈕時，此工具會查詢 Active Directory，以查看是否有符合首碼和編號的通訊群組清單已存在。 工具會建立尚未存在的任何 DLs。 將成員新增至這些新建立的通訊群組清單時，會從 [使用者建立] 索引標籤上所指定的範圍內選擇使用者。
  
#### <a name="location-info-service-config-tab"></a>位置資訊服務的 [配置] 索引標籤

商務用 Skype Server 2015 的壓力和效能工具也可以產生位置資訊服務的虛擬設定檔。 請注意，位置資訊服務通常對伺服器的效能影響不大。 
  
![使用者布建工具，顯示 [位置資訊服務配置] 索引標籤。](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
如果您選擇測試此功能，請填入表單中的值，然後按一下 [產生 .LIS 的 Config Files] 按鈕，將會建立名為的 .CSV 檔案：
  
- LIS_Subnet.csv
    
- LIS_Switches.csv
    
- LIS_Ports.csv
    
- LIS_WAP.csv
    
若要將這些檔案匯入 .LIS 資料庫，請使用下列 PowerShell Cmdlet：
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-CsWirelessAccessPoint
    
## <a name="configure-user-profile"></a>設定使用者設定檔
<a name="BKMK_UserProfile"> </a>

透過使用者建立工具建立使用者 (之後) 您可以使用商務用 Skype Server 2015 負載設定工具 (UserProfileGenerator.exe) 來設定使用者設定檔。
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>執行商務用 Skype Server 2015 Load Configuration 工具

啟動 [載入設定工具 (UserProfileGenerator.exe]) 並填入索引標籤。 此工具會為您需要執行模擬的每一部用戶端電腦建立目錄。 每個用戶端目錄隨附一個腳本，以啟動商務用 Skype Server 2015 的壓力和效能工具 (LyncPerfTool.exe) 。 以下各節將提供範例，說明如何在商務用 Skype Server 2015 負載設定工具的每個索引標籤上填入欄位。
  
> [!IMPORTANT]
> 在 [載入設定工具] (UserProfileGenerator.exe) 中使用的使用者特定值，必須符合集區中商務用 Skype Server 2015 使用者建立工具 (UserProvisioningTool.exe) 中所指定的值。 
  
#### <a name="common-configuration-tab"></a>通用設定] 索引標籤

「載入設定」工具的 [ **一般** 設定] 索引標籤如下所示。 填寫 [一般設定] 索引標籤的欄位，如下列步驟所述。
  
![顯示通用設定] 索引標籤的 [使用者布建] 索引標籤。](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. 在 [ **可用機器數目** ] 欄位中，輸入您要用來執行壓力和效能工具 (LyncPerfTool.exe) 的電腦數目。 我們建議您為每個要模擬的4500使用者提供一部電腦，但是該數目會因您降低負載層級而異，或僅使用工具可用功能的子集 (負載層級是在 [一般案例] 索引標籤) 上設定。
    
2. 在 [ **使用者名稱的首碼** ] 欄位中，為所有使用者輸入 [使用者名稱] 欄位的首碼。 若要登入統一資源識別項 (URI) 會是： *UserPrefix [User Start Index ... (使用者數目-1) ] @User 網域*  ，例如 myUser009@Contoso.com。
    
3. 在 [ **所有使用者的密碼** ] 欄位中，輸入使用者建立時所使用的密碼。 如果您將此欄位保留空白，則會將使用者名稱設為密碼。
    
4. 在 [ **使用者起始索引** ] 欄位中，輸入要設定的第一位使用者的索引。 您可以為不同的類型或不同的負載層級設定不同的範圍，但是必須針對您要設定的範圍執行「載入設定工具 (UserProfileGenerator.exe) 一次。
    
5. 在 [ **使用者數目** ] 欄位中，輸入您要設定的使用者總數。
    
6. 在 [ **使用者網域** ] 欄位中，輸入用於 SIP URI 的網域。 這是用來建立每一位使用者的 SIP URI，以登入商務用 Skype Server 2015 前端伺服器或 Standard Edition 伺服器，而且可能與帳戶網域不同。
    
7. 在 [ **帳戶網域** ] 欄位中，輸入 AD DS 網域登入。
    
8. 在 [ **MPOP 百分比** (多重存在) ] 欄位中，為從多部機器或裝置登入的使用者百分比提供值，例如10%。
    
9. 在 [ **每秒 (每個實例)** ] 欄位中輸入最大並行端點數目。 這是使用者的最大登入數目，而建議的速率為小於/等於2每秒 (<= 2) 。
    
10. 在 [ **Access Proxy 或集區 FQDN** ] 欄位中，輸入您要讓用戶端連接之伺服器的完整功能變數名稱 (FQDN) 。 若使用者在外部登入，您必須輸入存取 proxy proxy。 如果使用者是內部使用者，請給其 Enterprise 集區或 Standard Edition 伺服器的 FQDN。
    
11. 在 [ **埠** ] 欄位中，輸入您要讓使用者用於 SIP 的埠 (預設值為 5061) 。
    
12. 針對 [**外部網路伺服器設定**] 欄位中，提供存取 Proxy 或集區 FQDN，然後再給該 **埠**。 這些設定只用于外部端點的負載模擬。
    
#### <a name="general-scenarios-tab"></a>一般案例] 索引標籤

![「載入設定工具」顯示一般案例] 索引標籤。](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
您可以透過決定您要執行或停用的內容，為每個一般案例設定負載層級和參數。 您的一般選項如下：
  
> [!NOTE]
> **已停用** 所有欄位的負載層級值，但會停用本機資訊服務、**低**、**中**、**高** 或 **自訂**。 如果您選取任何設定，但是停用，則會為每個用戶端產生設定。 高導致伺服器支援的最大負載;中度是高負載的 60%;low 是30%。 
  
- **立即訊息-** 這包括對等和會議;為 [負載層級] 選擇適當的值。
    
- **音訊會議-** 選擇 [ *僅限*  音訊會議的負載層級]。 對等通話稍後會在 **語音案例** 區段中 tackled 一小段。 開啟 [ **高級** ] 索引標籤以啟用各頁。
    
- **應用程式共用-** 選擇應用程式共用的負載層級。
    
- **資料共同作業-** 選擇資料共同作業的負載層級（包括資料會議）。
    
- **通訊群組清單擴充-** 按一下 [ **高級** ] 按鈕，並在 [使用者建立工具 (UserProvisioningTool.exe]) 的 [DL] 索引標籤上設定相同值的欄位。 選擇一種負載層級。
    
- **通訊錄 Web 查詢-** 這是通訊錄查閱服務，而不是通訊錄檔案下載。 如果您想要針對通訊錄檔案下載啟用此功能，請按一下 [ **高級** ] 按鈕，並將 **EnableABSDownload** 設定為 True。 為 [負載層級] 提供值。
    
- **回應群組服務-** 按一下 [**高級**] 按鈕，並指定當您布建回應群組服務代理程式時，您已建立的回應群組 URIs。 您必須選擇至少一個回應群組。 若要使用其他，請以分號分隔回應群組。 將 **RGSUriSuffixStartIndex** 及 **RGSUriSuffixEndIndex** 更新為實際值。 選擇一種負載層級。
    
- **位置資訊服務-** 選取 [啟用] 或 [已停用] 的負載層級。
    
> [!NOTE]
> 每個案例旁邊都有一個「高級」按鈕，以及一組核取方塊，可對預設設定啟用變化。 
  
- 選擇  *[隨機]*  ，可讓工具產生整個一小時內所建立的會議類比。
    
- 選擇 [  *大型*  會議] 表示會模擬大型會議案例。
    
-  *外部*  告知工具也可模擬外部使用者。
    
這些按鈕和核取方塊是每個案例特有的額外值，而且會變更壓力和效能工具的行為，並使自訂成為可能。
  
針對 [一般案例] 索引標籤上的每個案例 (除位置資訊服務) 之外，如果負載層級的值是 [ **自訂**]，就會使用 [高級] 對話方塊中對應的欄位來計算交談率。 功能變數名稱可能會不同，具體取決於案例，但欄位描述將會是狀態：  *請注意，只有從下拉式功能表中選取 [自訂] 時，才會使用此號碼*  。
  
[ **高**]、[ **中**] 和 [ **低**] 這三個值將會以所有案例的平衡的使用者模型來變更每個形式的交談比率。 如果因預期的使用量差異而需要變更每個模態的負載層級，請使用自訂交談率。
  
#### <a name="voice-scenarios-tab"></a>語音案例] 索引標籤

這是設定所有語音相關案例的選項卡。
  
![載入設定工具語音案例] 索引標籤。](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
您的選項如下：
  
- **VoIP-** 按一下 [ **高級** ] 按鈕，並新增 PhoneAreaCode 及 microsoft.rtc.management.writableconfig.policy.voice.locationprofile (撥號對應表) 欄位的值。 您也會為負載層級提供值。 如果您選擇啟用 VoIP 或 UC/PSTN 閘道的負載層級，則會產生一部公用交換電話網路 (PSTN) 至整合通訊 (UC) 設定檔，以模擬外部通話。
    
- **UC/PSTN 閘道-** 您必須選擇一種負載層級值，當您選擇 [停用] 之外的任何專案時，您也可以按一下 [ **高級** ] 按鈕，為 PSTN 區功能變數代碼提供值。 按一下 [轉送伺服器和 PSTN] 底下的 [ **新增** ]。 請確定您已為區號設定路由。
    
    > [!TIP]
    > 您可以使用商務用 Skype 控制台或商務用 Skype 管理命令介面來驗證您的語音路由設定。 
  
- **會議語音應答-** 提供負載層級的值。 任何非 Disabled 的值都會啟用 [ **電話號碼** ] 欄位。 輸入您想要使用之自動語音應答的電話號碼。 按一下 [ **高級** ]，並提供 **microsoft.rtc.management.writableconfig.policy.voice.locationprofile** 欄位的值。
    
- **通話駐留服務-** 在這裡，提供負載層級。
    
- 中繼 **伺服器和 PSTN-** 您要使用的每台轉送伺服器都需要自己的 PSTN 模擬器。 決定要用於模擬器的用戶端後，請將您的轉送伺服器設定為在您設定的 PSTN 模擬器上，將通話路由傳送至該電腦。 按一下 [ **新增** ] 按鈕，設定轉送伺服器的值。
    
    > [!NOTE]
    > 每個案例都有一個位於它旁邊的 [高級] 按鈕。 [高級] 對話方塊包含每個案例特有的設定，這些設定會變更壓力和效能工具的行為，並啟用自訂。 > 每個案例在語音案例] 索引標籤上，如果負載層級的值是 **自訂** 的，就會使用 [高級] 對話方塊中對應的欄位來計算交談率。 功能變數名稱可能會不同，具體取決於案例，但欄位描述將會是狀態：  *請注意，只有從下拉式功能表中選取 [自訂] 時，才會使用此號碼*  。
  
#### <a name="web-app-tab"></a>Web 應用程式] 索引標籤

![載入設定工具，[Web 應用程式] 索引標籤。](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Web 應用程式透過安裝在前端伺服器上的整合通訊 Web API (UCWA) 伺服器，支援會議案例。 使用 [Web 應用程式] 索引標籤來設定所有 Web 應用程式相關案例。 選項包括：
  
- **一般 Web App 設定-** 按一下 [**其他設定**] 按鈕，並將 **ReachTargetServerUrl** 設定為前端集區 VIP 的目錄集區虛擬 IP (VIP) 。
    
- **應用程式共用-** 選取 [負載層級] 的值。
    
- **資料共同作業-** 選取 [負載層級] 的值。
    
- **立即訊息-** 選取 [負載層級] 的值。
    
- **語音會議-** 選取 [負載層級] 的值。
    
> [!NOTE]
> 每個案例都有一個位於它旁邊的 [ **高級** ] 按鈕。 [高級] 對話方塊包含每個案例特有的值，這些值會變更壓力和效能工具的行為，並啟用自訂。 > 每個 Web 應用程式案例時，如果負載層級是 **自訂** 的，就會使用 **ConversationsPerHour** 欄位中指定的值，而不是預設值。
  
#### <a name="mobility-tab"></a>行動] 索引標籤

使用此索引標籤可設定行動相關的所有案例。
  
![載入 [設定工具行動] 索引標籤。](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
選項如下：
  
- **一般行動性設定-** 按一下 [**其他設定**]，然後將 [欄位 UcwaTargetServerUrl] 設定為 Director 集區虛擬 IP (VIP) 或前端集區 VIP。
    
- 目前 **狀態和 P2P 立即訊息/音訊-** 選取 [負載層級] 的值，啟用行動類比。
    
> [!NOTE]
> 每個案例都有一個位於它旁邊的 [ **高級** ] 按鈕。 [高級] 對話方塊包含每個案例特有的值，這些值會變更壓力和效能工具的行為，並啟用自訂。 > 針對每個行動案例，如果負載層級為 [ **自訂**]，則會使用 [ **ConversationsPerHour** ] 欄位中指定的值，而不是預設值。
  
#### <a name="summary-tab"></a>摘要] 索引標籤

[摘要] 索引標籤會指出要針對每個案例使用的使用者。
  
![載入 [設定工具摘要] 索引標籤。](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
[摘要] 索引標籤會指出要針對每個案例使用的使用者。 
  
您可以手動設定使用者號碼範圍，方法是選取 [ **啟用自訂使用者範圍產生** ] 核取方塊，然後在具有您要自訂之使用者範圍的資料表中，按兩下案例。
  
檢查 **(RunClient.bat) 新增登入延遲** ，以包含產生的批次處理檔中的延遲，以對應到登入率。 當您簽署大量使用者時，這是避免伺服器超載的有用方法。
  
按一下 [ **產生** 檔案]，然後選取您要產生設定的資料夾。 當您已成功建立檔案時，會出現一個對話方塊。
  
![[已成功產生載入設定檔] 訊息方塊。 只要按一下 [確定]。](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>執行 LyncPerfTool
<a name="BKMK_RunTool"> </a>

在 (LyncPerfTool.exe) 中執行商務用 Skype Server 2015 的壓力和效能工具之前，您必須先建立使用者、連絡人及案例。 如需使用工具來執行這些動作的詳細資訊，請參閱 [建立使用者和連絡人](using-the-tool.md#BKMK_CreateUsersAndContacts) 及設定本文先前的 [使用者設定檔](using-the-tool.md#BKMK_UserProfile) 。 執行這些工具也會產生一個檔案，該檔案會以壓力和效能工具，以包含必要參數的批次檔案的一部分來執行。
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>執行商務用 Skype Server 2015 應力和效能工具

載入設定工具 (UserProfileGenerator.exe) 會建立批次處理檔案，可讓您透過註冊效能計數器及載入 XML 設定檔，來執行壓力和效能工具 (LyncPerfTool.exe) 。 批次檔案會針對每個設定檔執行 LyncPerfTool.exe 的一個實例。 若要執行批次檔，請遵循下列步驟：
  
### <a name="run-the-stress-and-performance-test"></a>執行壓力和效能測試

1. 將資料夾中的設定資料夾和檔案，複製到每個用戶端電腦上有 LyncPerfTool.exe 的目錄中。  (例如，如果在名為 1.28 _ 13.16.16 的資料夾中產生設定檔，請將該資料夾複製到具有 LyncPerfTool.exe 的資料夾中。 在每個用戶端執行這項作業。 ) 
    
2. 流覽至用戶端資料夾，並執行 **RunClient** 批次腳本。 您可以在 Windows Explorer 中按兩下批次處理檔案，它會針對該用戶端執行所有的設定檔案。 您也可以使用下列語法，從用戶端資料夾執行腳本：
    
   ```console
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

若要直接執行壓力和效能工具，請開啟命令提示字元，然後在命令列中輸入下列命令 (和第一次執行這項作業時，請務必註冊效能計數器  `regsvr32 /i /n /s LyncPerfToolPerf.dll` ，如本主題稍後的注意事項所示) ：
  
```console
LyncPerfTool.exe /file:IM_client0.xml
```

若要讓工具在設定檔中顯示值，請  `/displayfile` 在前述命令上加上參數，使它看起來像這樣：
  
```console
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

若要  *結束*  進程，請按 Ctrl+C。
  
> [!NOTE]
> 在直接執行壓力和效能工具之前，您必須透過下列命令來註冊效能計數器：  `regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> 您啟動的壓力和效能工具的每個實例都會立即開始登入使用者，通常會以每秒一個使用者的速率來進行簽署。 
  
集區的最高使用者登入率，每秒大約12個。 這表示當使用者仍登入時，您不應同時啟動超過12個 LyncPerfTool.exe 實例。 1000使用者大約需要20分鐘，以每秒完全登入一次。
  
## <a name="interpreting-the-results"></a>解讀結果
<a name="BKMK_Interpret"> </a>

商務用 Skype Server 2015 的壓力和效能工具有許多計數器可協助您瞭解用戶端的執行狀況，以及是否遇到問題。
  
### <a name="client-counters"></a>用戶端計數器

每個執行的 LyncPerfTool.exe 實例都有個別的計數器實例。 每個實例都會以其進程識別碼命名。 如果用戶端超載，可能會發生其他問題。 若要避免這些問題：
  
- 監視用戶端電腦上的 CPU 和記憶體使用量。 如果 CPU 持續超過90%，請減少使用者數目。
    
- 當記憶體佔用量高時，如果頁面檔開始耗盡空間，您可能會遇到問題。 確認認可費用未超出電腦上的限制。 如果您正在執行記憶體限制，請考慮增加頁面檔案大小或減少使用者數目。
    
以下是主要效能計數器的清單：
  
**一般資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|花費的時間（分鐘）  <br/> |自處理常式開始所花費的時間。  <br/> |
|作用中端點  <br/> |目前連線至伺服器的端點數目。  <br/> |
|失敗登入  <br/> |端點登入失敗總數。  <br/> |
|登入嘗試  <br/> |嘗試登入嘗試次數的總數。  <br/> |
|中斷連線端點  <br/> |已中斷連線的端點總數。  <br/> |
   
**目前狀態資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|SetPresence 通話  <br/> |目前狀態變更嘗試的總數。 針對不同類型的狀態變更，請參閱 SetPresence (目前狀態類型) 通話效能計數器。  <br/> |
|SetPresence 的 NNN 回應  <br/> |從伺服器接收的 nnn 回應碼總數。  <br/> |
|GetPresence 通話  <br/> |Get 顯示狀態要求嘗試總數。  <br/> |
|GetPresence 的 NNN 回應  <br/> |從伺服器接收的 nnn 回應碼總數。  <br/> |
   
**通訊錄服務資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|嘗試實際的完整/Delta 檔案下載  <br/> |所嘗試的完整或增量檔案下載要求總數。  <br/> |
|ABS 完整/Delta 檔案下載成功  <br/> |所嘗試的完整或增量檔案下載要求總數。  <br/> |
|通訊錄 Web 查詢服務相關的計數器  <br/> |通訊錄檔案下載相關的計數器。  <br/> |
|嘗試的 ABS WS 通話  <br/> |嘗試的通訊錄 Web 查詢服務要求總數。  <br/> |
|ABS WS 通話成功  <br/> |傳回成功回應碼之通訊錄 Web 查詢服務要求的總數。  <br/> |
|ABS WS 通話失敗  <br/> |傳回錯誤回應碼之通訊錄 Web 查詢服務要求的總數。  <br/> |
   
> [!NOTE]
> 此類別包含用於監視通訊錄服務 (ABS) 檔案下載和通訊錄 Web 查詢服務要求的計數器。 
  
**通訊群組清單 (DL) 資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|嘗試的來電  <br/> |嘗試之通訊群組清單擴充 (DLX) web 服務要求的總數。  <br/> |
|通話成功  <br/> |傳回成功回應碼之 DLX web 服務要求的總數。  <br/> |
|通話失敗  <br/> |傳回錯誤回應碼之 DLX web 服務要求的總數。  <br/> |
   

  
> [!NOTE]
> 在啟用這些案例時，所有 Voice over IP (VoIP) 通話（包括對轉送伺服器的呼叫、A/V 會議伺服器、Edge Server、回應群組應用程式和會議自動語音應答）的報告編號，均會列出下列效能計數器。 
  
**VoIP 基本資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動通話  <br/> |目前正在進行的傳入/傳出語音通話總數。  <br/> |
|來電終止  <br/> |已終止傳入/傳出語音通話的總數。  <br/> |
|拒絕通話  <br/> |拒絕的傳入語音通話總數。  <br/> |
|嘗試傳入/撥出電話  <br/> |嘗試傳入/傳出語音通話的總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出語音通話總數。  <br/> |
|呼叫已接收的 NNN  <br/> |從伺服器接收的 nnn 回應碼總數。  <br/> |
|VoIP 通率 (% )   <br/> |已建立的通話總數/嘗試的總通話數。  <br/> |
   
**回應群組服務呼叫資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動通話  <br/> |回應群組應用程式的作用中呼叫總數。  <br/> |
|嘗試的來電  <br/> |嘗試的呼叫總數。  <br/> |
   
**立即訊息 (IM) 呼叫資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動通話  <br/> |進行中傳入/傳出立即訊息通話的總數。  <br/> |
|來電終止  <br/> |已終止的傳入/傳出立即訊息通話總數。  <br/> |
|呼叫已接收的 NNN  <br/> |從伺服器接收的 nnn 回應碼總數。  <br/> |
|接收/傳送的 IM 訊息  <br/> |所有會話中已接收或已傳送的郵件總數。  <br/> |
|嘗試傳入/撥出電話  <br/> |嘗試傳入/傳出立即訊息通話的總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出立即訊息通話總數。  <br/> |
   
**應用程式共用呼叫資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動通話  <br/> |進行中傳入/傳出應用程式共用呼叫的總數。  <br/> |
|來電終止  <br/> |已終止的傳入/傳出應用程式共用呼叫總數。  <br/> |
|呼叫已接收的 NNN  <br/> |從伺服器接收的 nnn 回應碼總數。  <br/> |
|嘗試傳入/撥出電話  <br/> |嘗試的傳入/傳出應用程式共用呼叫總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出應用程式共用通話總數。  <br/> |
   
**CAA 呼叫資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動通話  <br/> |目前 (PSTN) 通話的內送/撥出公用交換電話網路 PSTN 總數。  <br/> |
|來電終止  <br/> |已終止的傳入/傳出 PSTN 通話總數。  <br/> |
|嘗試傳入/撥出電話  <br/> |嘗試傳入/傳出 PSTN 通話的總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出 PSTN 通話總數。  <br/> |
   
**會議資訊**

|**效能計數器**|**描述**|
|:-----|:-----|
|主動立即訊息會議  <br/> |進行中的立即訊息會議總數。  <br/> |
|活躍 Audio/Video 會議  <br/> |A/V) 會議的日常音訊/視頻 (總數。  <br/> |
|Active Application 共用會議  <br/> |進行中的應用程式共用會議總數。  <br/> |
|參與者人數  <br/> |目前連接至會議的參與者總數。  <br/> |
|會議排程失敗  <br/> |嘗試排程會議時的失敗總數。  <br/> |
|加入會議失敗  <br/> |嘗試連線至會議時的失敗總數。  <br/> |
   
**UCWA 用戶端計數器**

|**效能計數器**|**描述**|
|:-----|:-----|
|已成功聯結的 IMMCU 聯接總數  <br/> |加入的立即訊息會議總數。  <br/> |
|已成功聯結的 DMCU 聯接總數  <br/> |加入的 A/V 會議總數。  <br/> |
   

