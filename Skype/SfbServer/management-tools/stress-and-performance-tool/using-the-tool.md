---
title: 使用 商務用 Skype Server 2015 壓力和效能工具
ms.reviewer: ''
ms.author: serdars
author: SerdarSoysal
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: 若要執行 商務用 Skype Server 2015 壓力和效能工具，您必須能夠同時管理使用者、連絡人和使用者設定檔、設定工具以執行，然後檢閱工具所產生的輸出或結果。
ms.openlocfilehash: 300da4109ddbdbf06f6dcfbe241cc45c83ec82ca
ms.sourcegitcommit: 296862e02b548f0212c9c70504e65b467d459cc3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/25/2022
ms.locfileid: "65675725"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>使用 商務用 Skype Server 2015 壓力和效能工具
 
若要執行 商務用 Skype Server 2015 壓力和效能工具，您必須能夠同時管理使用者、連絡人和使用者設定檔、設定工具以執行，然後檢閱工具所產生的輸出或結果。
  
執行 商務用 Skype Server 2015 壓力和效能工具有四個相關領域， (可執行檔LyncPerfTool.exe) ：
  
- [建立使用者和連絡人](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [設定使用者設定檔](using-the-tool.md#BKMK_UserProfile)
    
- [執行 LyncPerfTool](using-the-tool.md#BKMK_RunTool)
    
- [解譯結果](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>建立使用者和連絡人
<a name="BKMK_CreateUsersAndContacts"> </a>

您必須使用 商務用 Skype Server 2015 (SB 2015) 使用者布建工具 (UserProvisioningTool.exe) 來建立壓力和效能測試的使用者和連絡人。
  
這是一份實用字詞清單，在您閱讀主題時可能很有用：
  
- **組織單位**- Active Directory 網域服務 (AD DS) 組織單位 (OU) 。
    
- **同盟/跨集** 區 - 可從其他立即訊息 (IM) 服務與使用者通訊的使用者。
    
- **通訊群組清單** - 或 DLL。 這些是 AD DS 中包含 AD DS 使用者清單的物件。 它們可用來促進人員群組之間的通訊。
    
- **位置資訊服務**- 商務用 Skype Server 2015 服務，啟用並設定每部手機時，允許擷取增強型 911 (E911) 服務的實體位置。
    
- **美國電話號碼**- 除了在反向號碼查閱 (RNL) 中用於路由傳送輸入和輸出呼叫的 SIP URI 之外，電話指派給使用者的號碼。
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>使用 UserProvisioningTool.exe 建立使用者和連絡人

> [!NOTE]
> 開始之前，請務必確定您已以 Domain Admins 安全性群組的成員身分登入，以執行此工具。 您必須這麼做，因為您將要建立 Active Directory 使用者。 
  
您必須使用商務用 Skype Server使用者布建工具來建立使用者和連絡人以進行負載模擬。
  
**商務用 Skype Server使用者布建工具** 會與 **商務用 Skype Server壓力和效能工具** 套件一起安裝。 請確定套件安裝程式 (CapacityPlanningTool.msi) 已在前端伺服器或您想要測試的Standard Edition伺服器上執行。
  
您可以執行位於前端伺服器或Standard Edition伺服器上 %InstalledDirectory%LyncStressAndPerfTool\LyncStress) 的檔案UserProvisioningTool.exe (，以啟動商務用 Skype Server使用者布建工具。
  
> [!IMPORTANT]
> 當您建立大量使用者 (例如，10，000 個以上的) 時，請執行UserProvisioningTool.exe。 您必須這麼做，因為此工具將會建立和設定  *新的*  AD 使用者。
  
當使用者布建工具開啟時，按一下 [設定] 並選取 [載入組態]。 
  
若要開始設定使用者和連絡人，請載入封裝隨附的預設檔案，稱為 「SampleData.xml」。 這會將您需要變更的範例資料預先填入欄位，使其與您的部署相關。
  
如果您有預先設定的 XML 檔案已經包含您的自訂設定，您可以改為載入該檔案。 填入使用者布建工具中的欄位，如下列各節所述。
  
### <a name="to-configure-server-options"></a>若要設定伺服器選項：

1. 在 [**前端集區 FQDN] 字** 段中，輸入完整功能變數名稱 (Standard Edition伺服器的 FQDN) ，或您要裝載使用者的前端集區。
    
2. 在 [ **使用者名稱前置** 詞] 欄位中，輸入您想要用來破壞使用者名稱以進行測試的前置詞， (例如 「TestUser」) 。
    
3. 在 [ **密碼]** 欄位中，輸入將用於所有測試使用者帳戶的密碼。
    
4. 在 [ **帳戶網域]** 欄位中，輸入目前 AD 網域的功能變數名稱 (您要在其中建立測試使用者) 的功能變數名稱。
    
5. 在 [ **組織單位]** 欄位中，輸入您要在其中建立這些測試使用者的 AD 網功能變數名稱稱。  (如果 OU 不存在，則會為您建立) 。
    
6. 在 [**電話 區碼]** 欄位中，輸入要在所有測試使用者帳戶中使用的三位數分區碼。 確定您選擇的分區代碼不會與其他使用者在 AD 中的分區碼衝突。
    
7. 如果您想要啟用企業語音的測試使用者，請按一下以選取 [**啟用語音**] 核取方塊。
    
8. 在 [ **使用者數目** ] 欄位中，提供您想要建立的測試使用者總數。
    
9. 在 [ **開始索引** ] 欄位中，提供將做為使用者名稱前置詞尾碼的起始編號 (例如，前置詞為 「TestUser」，而名字在下列範例中會以 「0」 結尾。) 
    
     ![顯示使用者建立索引標籤的使用者布建工具。](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>[建立使用者] 按鈕

當您按一下 [ **建立使用者** ] 按鈕時，會驗證您輸入的輸入參數。 如果有任何驗證錯誤，系統會提示您修正這些錯誤。 或者，如果所有值都正確，則使用者會開始出現在 AD (中，無論您指定哪一個 OU) 。 執行工具時，您會在工具底部看到進度列。 當進度列處於作用中狀態時，請勿關閉應用程式。
  
建立使用者需要一些時間，因此請據此規劃。 此程式可能需要幾分鐘的時間讓少數使用者使用，而大量使用者可能需要數小時的時間。
  
如果您在測試環境中沒有 AD 網域控制站的存取權，您仍然可以以您指定要建立之使用者範圍內的其中一個使用者身分登入來驗證使用者建立。 請記得使用 前置詞和尾碼，以及@sipDomain做為使用者名稱。 以下是範例：  <em>TestUser20@contoso.net</em>  。
  
> [!NOTE]
> 如果使用者已經存在，按一下 [建立使用者] 按鈕將會以任何組態變更來更新使用者。 
  
#### <a name="delete-users-button"></a>[刪除使用者] 按鈕

當您按一下 [ **刪除使用者** ] 按鈕時，將會驗證索引標籤的輸入參數。 如果發生驗證錯誤，系統會提示您修正錯誤，如果輸入值正確無誤，則會停用指定的測試使用者，並從 Active Directory 中刪除。 同樣地，進度列會出現在此索引標籤底部，而且您不應該在進度列作用中時關閉應用程式。
  
> [!NOTE]
> 僅支援美國格式的電話號碼。 電話號碼一律會指派給使用者，而且預設會啟用UserProvisioningTool.exe建立的所有使用者企業語音。 使用電話號碼的任何案例，例如會議自動語音應答或 UC-PSTN 通話，都會使用此電話號碼來正確路由通話。 因此，  *每個使用者*  都必須有 *唯一的電話號碼*  。
  
> [!NOTE]
> **如果您必須建立使用者兩次，除非您使用不同的分區碼，或先前的使用者已使用 Disable-CsUser Cmdlet 停用，否則命令將會失敗。**
  
> [!IMPORTANT]
> 建立連絡人之前，您必須先完成使用者複寫 (從 [使用者] 索引標籤) 完成。 
  
> [!IMPORTANT]
> 如果您剛建立使用者，您必須等到商務用 Skype Server複寫完成，並在資料庫中填入使用者帳戶。 **如果使用者尚未完成複寫，您會看到錯誤。** 如果已啟動 商務用 Skype Server 2015 前端服務，或在您指定總數的最後一個使用者上成功執行 Get-CsUser Cmdlet，您將知道使用者何時完成複寫。
  
#### <a name="contacts-creation-tab"></a>[建立連絡人] 索引標籤

此索引標籤可讓您為測試提供使用者的連絡人詳細資料。
  
![顯示 [內容建立] 索引標籤的使用者布建工具。](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>若要設定使用者的連絡人，請執行下列動作：

1. 在 [ **每個使用者的平均連絡人** ] 欄位中，輸入要填入每個使用者連絡人清單中的平均連絡人數目。
    
2. 如果您想要為每個使用者建立相等數目的連絡人，請選取 [ **已修正** ] 核取方塊。 如果您想要變更為使用者建立的連絡人數目，請清除該核取方塊。
    
3. 在 [ **每個使用者的平均連絡人群組** ] 欄位中，輸入每位使用者的連絡人群組數目。 此數目必須小於 **每個使用者的平均連絡人**。
    
4. 在 [ **同盟/跨集區連絡人百分比** ] 欄位中，提供介於 0 到 100 之間的數位。 此百分比的連絡人會與同盟使用者一起建立。
    
5. 在 [ **同盟/ 跨集區使用者首碼** ] 欄位中，為將新增至本機使用者連絡人清單的同盟使用者提供使用者名稱。
    
6. 在 [ **同盟/ 跨集區使用者 SIP 網域** ] 欄位中，提供同盟使用者的 SIP 功能變數名稱。
    
7. 在 [ **使用者建立] 索** 引標籤中，確定資訊正確無誤。 您的連絡人將會從 [使用者建立] 索引標籤上的值建立。
    
8. 按一下 **[建立連絡人** ] 開始建立連絡人。 此程式可能需要幾分鐘的時間。 完成之後，會出現一個對話方塊，其中包含「作業已成功完成」訊息。 您可以從 [使用者建立] 索引標籤以使用者身分登入來驗證所建立的連絡人。
    
    > [!NOTE]
    > 建立連絡人之後，此工具會重新開機目標集區中的所有前端伺服器。 視此作業建立的連絡人數目而定，前端伺服器可能需要更長的 (2 小時) 才能啟動。 
  
#### <a name="distribution-list"></a>通訊群組清單

商務用 Skype Server 2015 壓力與效能工具可以在 商務用 Skype 2015 用戶端中模擬 「通訊群組清單 (DL) 擴充功能。 如果您不打算在使用者布建工具中啟用 DL 擴充，您可以略過此步驟。
  
![顯示 [發佈清單建立] 索引標籤的使用者布建工具。](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
[通訊群組清單] 索引標籤可讓您建立壓力和效能工具將用於通訊群組清單擴充功能的 DLL。 建立 DLL 之前，必須先部署 商務用 Skype Server 2015，包括執行 ForestPrep。 如果未這麼做，DL 屬性將不會存在於 AD 架構中，因此工具將無法建立 DLL。
  
### <a name="to-configure-distribution-lists"></a>若要設定通訊群組清單：

1. 在 [ **通訊群組清單數目** ] 欄位中，提供您想要建立的 DLL 總數 (此處的建議是，您一開始使用的值是您擁有使用者數目的兩倍。) 。
    
2. 在 [ **通訊群組清單前置** 詞] 欄位中，輸入您建立的所有 DLL 都會有的前置詞，例如 *testDL*  。 這表示，在 100 個 DLL 時，您的 DL 名稱看起來會像這樣：testDL0、testDL1，最多可達 testDL99。
    
3. 在 [ **Dist. List] 欄位中的 [最小成員** ] 欄位中，輸入要放入每個 DL 的使用者數目下限。
    
4. 在 [ **Dist. List** ] 中的 [成員數目上限] 欄位中，輸入要在每個 DL 中新增的使用者數目上限。
    
#### <a name="create-distribution-lists-button"></a>[建立通訊群組清單] 按鈕

當您按一下 [建立通訊群組清單] 按鈕時，工具會查詢 Active Directory，以查看符合前置詞和數位的通訊群組清單是否已經存在。 此工具會建立任何不存在的 DLL。 將成員新增至這些新建立的通訊群組清單時，它會從 [使用者建立] 索引標籤上指定的範圍中選擇使用者。
  
#### <a name="location-info-service-config-tab"></a>位置資訊服務設定索引標籤

商務用 Skype Server 2015 壓力和效能工具也可以產生位置資訊服務的虛擬組態檔。 請注意，位置資訊服務通常不會對伺服器造成顯著的效能影響。 
  
![顯示 [位置資訊服務設定] 索引標籤的使用者布建工具。](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
如果您選擇測試這項功能，請填寫表單中的值，然後按一下 [產生 LIS 組態檔] 按鈕，這會建立.CSV稱為 的檔案：
  
- LIS_Subnet.csv
    
- LIS_Switches.csv
    
- LIS_Ports.csv
    
- LIS_WAP.csv
    
若要將這些檔案匯入 LIS 資料庫，請使用下列 PowerShell Cmdlet：
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-CsWirelessAccessPoint
    
## <a name="configure-user-profile"></a>設定使用者設定檔
<a name="BKMK_UserProfile"> </a>

透過使用者建立工具 (建立使用者之後) 您可以使用 商務用 Skype Server 2015 載入組態工具 (UserProfileGenerator.exe) 來設定使用者設定檔。
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>執行 商務用 Skype Server 2015 Load Configuration 工具

啟動 [載入組態] 工具 (UserProfileGenerator.exe) 並填入索引標籤。 此工具會為您執行模擬所需的每部用戶端電腦建立目錄。 每個用戶端目錄都隨附腳本來啟動 商務用 Skype Server 2015 壓力和效能工具 (LyncPerfTool.exe) 。 下列各節將提供如何在 商務用 Skype Server 2015 Load Configuration 工具的每個索引標籤上填入欄位的範例。
  
> [!IMPORTANT]
> 載入組態工具 (UserProfileGenerator.exe) 中使用的使用者特定值必須符合集區商務用 Skype Server 2015 使用者建立工具 (UserProvisioningTool.exe) 中指定的值。 
  
#### <a name="common-configuration-tab"></a>[一般組態] 索引標籤

[載入組態工具] 的 [ **一般** 組態] 索引標籤如下所示。 填入 [一般組態] 索引標籤的欄位，如下列步驟所述。
  
![顯示 [一般組態] 索引標籤的 [使用者布建] 索引標籤。](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. 在 [ **可用的電腦數目** ] 欄位中，輸入您要用來執行壓力和效能工具的電腦數目 (LyncPerfTool.exe) 。 建議您每模擬 4500 位使用者一部電腦，但如果您減少負載層級，或只使用工具可用功能的子集， ([一般案例] 索引標籤上的 [載入層級] 索引標籤上設定) ，該數位可能會有所不同。
    
2. 在 [ **使用者名稱的前置** 詞] 欄位中，輸入所有使用者之使用者名稱欄位的前置詞。 若要登入統一資源識別項 (URI) 會是： *UserPrefix[User Start Index... (Number Of Users-1) ]@User Domain*  ，例如，myUser009@Contoso.com。
    
3. 在 [ **所有使用者的密碼]** 欄位中，輸入建立使用者期間所使用的密碼。 如果您將此欄位保留空白，使用者名稱將會設定為密碼。
    
4. 在 [ **使用者開始索引** ] 欄位中，輸入要設定之第一個使用者的索引。 您可以針對不同類型或負載層級設定不同的範圍，但必須針對您想要設定的範圍執行負載設定工具 (UserProfileGenerator.exe) 一次。
    
5. 在 [ **使用者數目** ] 欄位中，輸入您要設定的使用者總數。
    
6. 在 [ **使用者網域]** 欄位中，輸入用於 SIP URI 的網域。 這是用來建構每個使用者的 SIP URI，以登入 商務用 Skype Server 2015 前端伺服器或Standard Edition伺服器，而且可能與帳戶網域不同。
    
7. 在 [ **帳戶網域]** 欄位中，輸入 AD DS 網域登入。
    
8. 在 [ **MPOP 百分比** (多重存在點百分比) 欄位中，提供從多部電腦或裝置登入使用者百分比的值，例如 10%。
    
9. 在 [每秒登入 (每個實例) 欄位中輸入並行端點的最大 **數目** 。 這是使用者的登入數目上限，建議的速率小於/等於每秒 2 (<=2) 。
    
10. 在 [ **存取 Proxy 或集區 FQDN]** 欄位中，輸入您想要用戶端連線之伺服器的完整功能變數名稱 (FQDN) 。 如果使用者在外部登入，您必須輸入存取 Proxy。 如果使用者是內部使用者，請提供其Enterprise集區或Standard Edition伺服器的 FQDN。
    
11. 在 [ **埠** ] 欄位中，輸入您要讓使用者用於 SIP 的埠 (此處的預設值為 5061) 。
    
12. 針對 [**外部網路伺服器設定**] 欄位，提供 [存取 Proxy] 或 [集區 FQDN]，並再次提供 **[埠]**。 這些設定僅用於外部端點負載模擬。
    
#### <a name="general-scenarios-tab"></a>[一般案例] 索引標籤

![顯示 [一般案例] 索引標籤的 [載入組態工具]。](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
您可以藉由判斷要執行或保留停用的內容，為每個一般案例設定負載層級和參數。 以下是您的一般選項：
  
> [!NOTE]
> 除了本機資訊服務，所有欄位的負載層級值都是 **Disabled**、 **Low**、 **Medium**、 **High** 或 **Custom**。 如果您選取 [已停用] 的任何設定，則會為每個用戶端產生組態。 高會導致伺服器上支援的最大負載;中是高負載的 60%，低為 30%。 
  
- **立即訊息 -** 這包括點對點和會議;為 [負載層級] 選擇適當的值。
    
- **音訊會議 -** *僅* 選擇音訊會議的負載層級。 稍後會在 **語音** 案例一節中處理點對點通話。 開啟 [ **進階** ] 索引標籤以啟用 MultiView。
    
- **應用程式共用 -** 選擇應用程式共用的負載層級。
    
- **資料共同作業 -** 選擇包含資料會議的資料共同作業負載層級。
    
- **通訊群組清單擴充 -** 按一下 [ **進階** ] 按鈕，然後在 [使用者建立工具] (UserProvisioningTool.exe [) ] 的 [DL] 索引標籤上填入相同值的欄位。 選擇負載層級。
    
- **通訊錄 Web 查詢 -** 這是通訊錄查閱服務，而不是通訊錄檔案下載。 如果您想要針對通訊錄檔案下載啟用此功能，請按一下 [ **進** 階] 按鈕，並將 **[EnableABSDownload]** 設定為 [True]。 提供負載層級的值。
    
- **回應群組服務 -** 按一下 [**進** 階] 按鈕，並指定您在布建回應群組服務代理程式時所建立回應群組的 URI。 您必須至少選擇一個回應群組。 若要使用更多專案，請以分號分隔回應群組。 將 **RGSUriSuffixStartIndex** 和 **RGSUriSuffixEndIndex** 更新為實際值。 選擇負載層級。
    
- **位置資訊服務 -** 選取 [已啟用] 或 [已停用] 的載入層級。
    
> [!NOTE]
> 每個案例旁邊都有一個 [進階] 按鈕，以及一組可啟用預設設定變化的核取方塊。 
  
- 選擇  *[臨機操作*  ] 可讓工具產生將在整個一小時內建立的會議模擬。
    
- 選擇  *[大型 Conf*  ] 表示將會模擬大型會議案例。
    
-  *External*  會告知工具也模擬外部使用者。
    
這些按鈕和核取方塊是每個案例特有的額外值，將會變更壓力和效能工具的行為，並使自訂成為可能。
  
針對 [一般案例] 索引標籤上的每個案例， (位置資訊服務) 除外，如果 [負載層級] 的值為 **[自訂**]，則會使用 [進階] 對話方塊中的對應欄位來計算交談速率。 功能變數名稱可能會有所不同，視案例而定，但欄位描述會指出：  *注意，只有在從下拉式功能表中選取 [自訂] 時，才會使用此數位*  。
  
**[高**]、**[中]** 和 [**低**] 值會根據符合所有案例平衡的使用者模型來改變每個強制回應的交談速率。 如果因為預期使用量的差異而需要變更每個強制回應的負載層級，請使用自訂交談速率。
  
#### <a name="voice-scenarios-tab"></a>語音案例索引標籤

這是所有語音相關案例的設定索引標籤。
  
![[載入設定工具語音案例] 索引標籤。](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
您的選項如下：
  
- **VoIP -** 按一下 [ **進階** ] 按鈕，然後新增 PhoneAreaCode 和 LocationProfile (撥號對應表) 欄位的值。 您也會提供負載層級的值。 如果您選擇已啟用 VoIP 或 UC/PSTN 閘道的負載層級，則會產生公用交換電話網路 (PSTN) 整合通訊 (UC) 組態檔，以模擬外部通話。
    
- **UC/PSTN 閘道 -** 您需要選擇 [負載層級] 值，當您選擇 [已停用] 以外的任何專案時，也必須按一下 [進階 **] 按鈕來** 提供 PSTN 分區代碼的值。 按一下 [轉送伺服器和 PSTN] 底下的 [ **新增** ]。 請確定您已針對分區碼設定路由。
    
    > [!TIP]
    > 您可以使用商務用 Skype 主控台或商務用 Skype管理命令介面來驗證您的語音路由設定。 
  
- **會議語音應答 -** 提供負載層級的值。 Disabled 以外的任何值都會啟用 **[電話號碼] 字** 段。 輸入您想要使用之自動語音應答的電話號碼。 按一下 **[進階** ]，並提供 **LocationProfile 欄位的** 值。
    
- **通話駐留服務 -** 在這裡，提供負載層級。
    
- **轉送伺服器和 PSTN -** 您想要使用的每個轉送伺服器都需要自己的 PSTN 模擬器。 在您決定要將哪一個用戶端用於模擬器之後，請設定您的轉送伺服器，以在您設定的 PSTN 模擬器上將呼叫路由傳送至該電腦。 按一下 [ **新增]** 按鈕以設定轉送伺服器的值。
    
    > [!NOTE]
    > 每個案例旁邊都有一個 [進階] 按鈕。 進階對話方塊包含每個案例的特定設定，這些設定會變更壓力和效能工具的行為並啟用自訂。 > 針對 [語音案例] 索引標籤上的每個案例，如果 [負載層級] 的值為 **[自訂**]，則會使用 [進階] 對話方塊中的對應欄位來計算交談速率。 功能變數名稱可能會有所不同，視案例而定，但欄位描述會指出：  *注意，只有在從下拉式功能表中選取 [自訂] 時，才會使用此數位*  。
  
#### <a name="web-app-tab"></a>Web 應用程式索引標籤

![載入組態工具，Web 應用程式索引標籤。](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Web 應用程式透過安裝在前端伺服器上的整合通訊 Web API (UCWA) 伺服器支援會議案例。 使用 [Web 應用程式] 索引標籤來設定所有 Web 應用程式相關案例。 選項包括：
  
- **一般 Web 應用程式設定 -** 按一下 [**其他設定**] 按鈕，並將 **ReachTargetServerUrl** 設定為前端集區 VIP) 的目錄集區虛擬 IP (VIP。
    
- **應用程式共用 -** 選取 [負載層級] 的值。
    
- **資料共同作業 -** 選取 [負載層級] 的值。
    
- **立即訊息 -** 選取 [負載層級] 的值。
    
- **語音會議 -** 選取 [負載層級] 的值。
    
> [!NOTE]
> 每個案例旁邊都有一個 [ **進** 階] 按鈕。 進階對話方塊包含每個案例特定的值，這些值會變更 Stress and Performance Tool 的行為並啟用自訂。> 針對每個 Web 應用程式案例，如果 [負載層級] 是 **[自訂**]，則會使用 [交談][ **PerHour** ] 欄位中指定的值，而不是預設值。
  
#### <a name="mobility-tab"></a>行動性索引標籤

使用此索引標籤來設定所有行動相關的案例。
  
![載入設定工具 [行動性] 索引標籤。](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
這裡的選項如下：
  
- **一般行動設定 -** 按一下 **[其他設定**]，並將 [UcwaTargetServerUrl] 欄位設定為 [目錄集區] 虛擬 IP (VIP) 或前端集區 VIP。
    
- **目前狀態和 P2P 立即訊息/音訊 -** 選取 [負載層級] 的值以啟用行動模擬。
    
> [!NOTE]
> 每個案例旁邊都有一個 [ **進** 階] 按鈕。 進階對話方塊包含每個案例的特定值，這些值會變更 Stress and Performance Tool 的行為並啟用自訂。> 針對每個行動案例，如果 [負載層級] 是 **[自訂**]，則會使用 [ **ConversationsPerHour** ] 欄位中指定的值，而不是預設值。
  
#### <a name="summary-tab"></a>[摘要] 索引標籤

[摘要] 索引標籤會指出要用於每個案例的使用者。
  
![[載入組態工具摘要] 索引標籤。](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
[摘要] 索引標籤會指出要用於每個案例的使用者。 
  
您可以選取 [ **啟用自訂使用者範圍** 產生] 核取方塊，然後按兩下具有您要自訂使用者範圍之資料表中的案例，手動設定使用者編號範圍。
  
Check **(RunClient.bat) 在啟動時新增登入延遲** ，以便在產生的批次檔中包含延遲，以對應到登入速率。 這有助於防止登入大量使用者時伺服器多載。
  
按一下 **[產生檔案]** ，然後選取您要產生組態的資料夾。 成功建立檔案時，會出現對話方塊。
  
![[成功載入組態檔] 訊息方塊。 只要按一下 [確定]。](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>執行 LyncPerfTool
<a name="BKMK_RunTool"> </a>

您必須先建立使用者、連絡人和案例，才能執行 商務用 Skype Server 2015 壓力與效能工具 (LyncPerfTool.exe) 。 如需使用工具來執行這些動作的詳細資訊，請參閱本文先前的 [建立使用者和連絡人和](using-the-tool.md#BKMK_CreateUsersAndContacts) 設定 [使用者設定檔](using-the-tool.md#BKMK_UserProfile) 。 執行這些工具也會產生一個檔案，該檔案會在包含必要參數的批次檔中，使用 Stress and Performance 工具來執行。
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>執行 商務用 Skype Server 2015 壓力和效能工具

[載入組態] 工具 (UserProfileGenerator.exe) 會建立批次檔，可讓您藉由註冊效能計數器並載入 XML 組態檔來執行壓力和效能工具 (LyncPerfTool.exe) 。 批次檔會針對每個組態檔執行一個LyncPerfTool.exe實例。 若要執行批次檔，請遵循下列步驟：
  
### <a name="run-the-stress-and-performance-test"></a>執行壓力和效能測試

1. 將內含組態資料夾和檔案的資料夾複製到每個用戶端電腦上LyncPerfTool.exe的目錄。  (例如，如果您在名為 1.28_13.16.16 的資料夾中產生組態檔，請將該資料夾複製到資料夾中LyncPerfTool.exe。 在每個 client.) 上執行此動作
    
2. 流覽至用戶端資料夾，然後執行 **RunClient** 批次腳本。 您可以在 [Windows 總管] 中按兩下批次檔，它會執行該用戶端的所有組態檔。 您也可以使用下列語法，從用戶端資料夾執行腳本：
    
   ```console
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

若要直接執行 Stress 和 Performance 工具，請開啟命令提示字元，並在命令列 (輸入下列命令，在第一次執行此動作時，請務必註冊效能計數器  `regsvr32 /i /n /s LyncPerfToolPerf.dll` ，如本主題稍後的附注) ：
  
```console
LyncPerfTool.exe /file:IM_client0.xml
```

若要讓工具顯示組態檔中的值，請在上述命令中包含  `/displayfile` 參數，讓它看起來像這樣：
  
```console
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

若  *要結束*  此程式，請按 Ctrl+C。
  
> [!NOTE]
> 在直接執行 Stress 和 Performance 工具之前，您必須透過下列命令註冊效能計數器：  `regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> 您啟動的每個 Stress and Performance 工具實例都會立即開始登入使用者，通常每秒一個使用者的速率。 
  
集區的尖峰使用者登入率約為每秒 12。 這表示當使用者仍在登入時，您不應該同時啟動超過 12 個LyncPerfTool.exe實例。 一千位使用者大約需要 20 分鐘的時間，才能每秒一次完全登入。
  
## <a name="interpreting-the-results"></a>解譯結果
<a name="BKMK_Interpret"> </a>

商務用 Skype Server 2015 壓力和效能工具有許多計數器，可協助您瞭解用戶端正在執行的動作，以及其是否遇到問題。
  
### <a name="client-counters"></a>用戶端計數器

每個執行LyncPerfTool.exe實例都有個別的計數器實例。 每個實例都是以其進程識別碼命名。 如果用戶端多載，則可能會發生其他問題。 若要避免這些問題：
  
- 監視用戶端電腦上的 CPU 和記憶體使用量。 如果 CPU 持續高於 90%，請減少使用者數目。
    
- 當記憶體使用量很高時，如果分頁檔開始用盡空間，您可能會遇到問題。 確認認可費用未達到電腦上的限制。 如果您遇到記憶體限制，請考慮增加頁面檔案大小或減少使用者數目。
    
以下是主要效能計數器的清單：
  
**一般資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|花費在分鐘數內的時間  <br/> |啟動程式後所花費的時間。  <br/> |
|作用中端點  <br/> |目前連線到伺服器的端點數目。  <br/> |
|失敗的登入  <br/> |端點登入失敗的總數。  <br/> |
|登入嘗試  <br/> |端點登入嘗試總數。  <br/> |
|已中斷連線的端點  <br/> |已中斷連線的端點總數。  <br/> |
   
**目前狀態資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|SetPresence 呼叫  <br/> |目前狀態變更嘗試的總數。 如需不同類型的目前狀態變更，請參閱 SetPresence (顯示類型) 呼叫效能計數器。  <br/> |
|SetPresence 的 NNN 回應  <br/> |從伺服器接收到的 nnn 回應碼總數。  <br/> |
|GetPresence 呼叫  <br/> |取得目前狀態要求嘗試的總數。  <br/> |
|GetPresence 的 NNN 回應  <br/> |從伺服器接收到的 nnn 回應碼總數。  <br/> |
   
**通訊錄服務資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|嘗試進行 ABS 完整/差異檔案下載  <br/> |嘗試的完整或差異檔案下載要求總數。  <br/> |
|ABS 完整/差異檔案下載成功  <br/> |嘗試的完整或差異檔案下載要求總數。  <br/> |
|通訊錄 Web 查詢服務相關計數器  <br/> |通訊錄檔案下載相關的計數器。  <br/> |
|嘗試 ABS WS 呼叫  <br/> |嘗試的通訊錄 Web 查詢服務要求總數。  <br/> |
|ABS WS 呼叫成功  <br/> |傳回成功回應碼的通訊錄 Web 查詢服務要求總數。  <br/> |
|ABS WS 呼叫失敗  <br/> |傳回錯誤回應碼的通訊錄 Web 查詢服務要求總數。  <br/> |
   
> [!NOTE]
> 此類別包含用來監視通訊錄服務 (ABS) 檔案下載和通訊錄 Web 查詢服務要求的計數器。 
  
**DL) 資訊 (通訊群組清單**

|**效能計數器**|**說明**|
|:-----|:-----|
|已嘗試呼叫  <br/> |嘗試進行 Web 服務要求 (DLX) 通訊群組清單擴充總數。  <br/> |
|呼叫成功  <br/> |傳回成功回應碼的 DLX Web 服務要求總數。  <br/> |
|呼叫失敗  <br/> |傳回錯誤回應碼的 DLX Web 服務要求總數。  <br/> |
   

  
> [!NOTE]
> 下列效能計數器會報告啟用這些案例時，所有語音轉換 IP (VoIP) 呼叫的數位，包括呼叫轉送伺服器、A/V 會議伺服器、Edge Server、回應群組應用程式和會議自動語音應答。 
  
**VoIP 基本資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|呼叫作用中  <br/> |目前進行中的傳入/傳出語音通話總數。  <br/> |
|呼叫已終止  <br/> |已終止的傳入/傳出語音通話總數。  <br/> |
|通話已拒絕  <br/> |拒絕的來電總數。  <br/> |
|已嘗試傳入/撥出電話  <br/> |嘗試的傳入/傳出語音通話總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出語音通話總數。  <br/> |
|接聽的 NNN 通話  <br/> |從伺服器接收到的 nnn 回應碼總數。  <br/> |
|VoIP 傳遞率 (%)   <br/> |已建立的呼叫總數/嘗試的呼叫總數。  <br/> |
   
**回應群組服務通話資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|呼叫作用中  <br/> |回應群組應用程式的作用中呼叫總數。  <br/> |
|已嘗試呼叫  <br/> |嘗試的呼叫總數。  <br/> |
   
**立即訊息 (IM) 通話資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|呼叫作用中  <br/> |進行中的傳入/傳出立即訊息呼叫總數。  <br/> |
|呼叫已終止  <br/> |已終止的傳入/傳出立即訊息呼叫總數。  <br/> |
|接聽的 NNN 通話  <br/> |從伺服器接收到的 nnn 回應碼總數。  <br/> |
|已接收/已傳送的 IM 訊息  <br/> |所有會話已接收或傳送的訊息總數。  <br/> |
|已嘗試傳入/撥出電話  <br/> |嘗試的傳入/傳出立即訊息呼叫總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出立即訊息呼叫總數。  <br/> |
   
**應用程式共用通話資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|呼叫作用中  <br/> |進行中的傳入/傳出應用程式共用呼叫總數。  <br/> |
|呼叫已終止  <br/> |已終止的傳入/傳出應用程式共用呼叫總數。  <br/> |
|接聽的 NNN 通話  <br/> |從伺服器接收到的 nnn 回應碼總數。  <br/> |
|已嘗試傳入/撥出電話  <br/> |嘗試的傳入/傳出應用程式共用呼叫總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出應用程式共用呼叫總數。  <br/> |
   
**CAA 通話資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|呼叫作用中  <br/> |目前進行中的連入/傳出公用電話交換 (PSTN) 通話總數。  <br/> |
|呼叫已終止  <br/> |已終止的傳入/傳出 PSTN 呼叫總數。  <br/> |
|已嘗試傳入/撥出電話  <br/> |嘗試的傳入/傳出 PSTN 呼叫總數。  <br/> |
|已建立傳入/撥出電話  <br/> |已建立的傳入/傳出 PSTN 呼叫總數。  <br/> |
   
**會議資訊**

|**效能計數器**|**說明**|
|:-----|:-----|
|作用中的立即訊息會議  <br/> |進行中的立即訊息會議總數。  <br/> |
|作用中的音訊/視訊會議  <br/> |A/V) 會議 (進行中的音訊/視訊總數。  <br/> |
|作用中的應用程式共用會議  <br/> |進行中應用程式共用會議的總數。  <br/> |
|參與者數目  <br/> |目前連線到會議的參與者總數。  <br/> |
|會議排程失敗  <br/> |嘗試排程會議時的失敗總數。  <br/> |
|加入會議失敗  <br/> |嘗試連線到會議時的失敗總數。  <br/> |
   
**UCWA 用戶端計數器**

|**效能計數器**|**說明**|
|:-----|:-----|
|成功 IMMCU 聯結的總數  <br/> |已加入的立即訊息會議總數。  <br/> |
|DMCU 聯結成功總數  <br/> |已加入的 A/V 會議總數。  <br/> |
   

